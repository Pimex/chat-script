/*! For license information please see pimex-chat.js.LICENSE.txt */
(()=>{var t={742:(t,e)=>{"use strict";e.byteLength=function(t){var e=c(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,o=c(t),s=o[0],a=o[1],p=new n(function(t,e,i){return 3*(e+i)/4-i}(0,s,a)),u=0,h=a>0?s-4:s;for(i=0;i<h;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],p[u++]=e>>16&255,p[u++]=e>>8&255,p[u++]=255&e;return 2===a&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,p[u++]=255&e),1===a&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,p[u++]=e>>8&255,p[u++]=255&e),p},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,o=[],s=16383,a=0,c=r-n;a<c;a+=s)o.push(p(t,a,a+s>c?c:a+s));return 1===n?(e=t[r-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),o.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)i[s]=o[s],r[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function p(t,e,r){for(var n,o,s=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=n)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},976:(t,e,i)=>{"use strict";const r=i(742),n=i(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=c,e.h2=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return p(t,e,i)}function p(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|_(t,e);let r=a(i);const n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(J(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(J(t,ArrayBuffer)||t&&J(t.buffer,ArrayBuffer))return f(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(J(t,SharedArrayBuffer)||t&&J(t.buffer,SharedArrayBuffer)))return f(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,i);const n=function(t){if(c.isBuffer(t)){const e=0|d(t.length),i=a(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||K(t.length)?a(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),a(t<0?0:0|d(t))}function l(t){const e=t.length<0?0:0|d(t.length),i=a(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function f(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,c.prototype),r}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function _(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||J(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return X(t).length;default:if(n)return r?-1:W(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,i);case"utf8":case"utf-8":return T(this,e,i);case"ascii":return S(this,e,i);case"latin1":case"binary":return A(this,e,i);case"base64":return E(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function y(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),K(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,i,r,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):v(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function v(t,e,i,r,n){let o,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,i/=2}function p(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){let r=-1;for(o=i;o<a;o++)if(p(t,o)===p(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(i+c>a&&(i=a-c),o=i;o>=0;o--){let i=!0;for(let r=0;r<c;r++)if(p(t,o+r)!==p(e,r)){i=!1;break}if(i)return o}return-1}function b(t,e,i,r){i=Number(i)||0;const n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(K(r))return s;t[i+s]=r}return s}function w(t,e,i,r){return Y(W(e,t.length-i),t,i,r)}function x(t,e,i,r){return Y(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function k(t,e,i,r){return Y(X(e),t,i,r)}function I(t,e,i,r){return Y(function(t,e){let i,r,n;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),r=i>>8,n=i%256,o.push(n),o.push(r);return o}(e,t.length-i),t,i,r)}function E(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function T(t,e,i){i=Math.min(t.length,i);const r=[];let n=e;for(;n<i;){const e=t[n];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(n+s<=i){let i,r,a,c;switch(s){case 1:e<128&&(o=e);break;case 2:i=t[n+1],128==(192&i)&&(c=(31&e)<<6|63&i,c>127&&(o=c));break;case 3:i=t[n+1],r=t[n+2],128==(192&i)&&128==(192&r)&&(c=(15&e)<<12|(63&i)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:i=t[n+1],r=t[n+2],a=t[n+3],128==(192&i)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),n+=s}return function(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=O));return i}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,i){return p(t,e,i)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,i){return function(t,e,i){return u(t),t<=0?a(t):void 0!==e?"string"==typeof i?a(t).fill(e,i):a(t).fill(e):a(t)}(t,e,i)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=c.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(J(e,Uint8Array))n+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,n)):Uint8Array.prototype.set.call(r,e,n);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,n)}n+=e.length}return r},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const i=e.h2;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(t,e,i,r,n){if(J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let o=(n>>>=0)-(r>>>=0),s=(i>>>=0)-(e>>>=0);const a=Math.min(o,s),p=this.slice(r,n),u=t.slice(e,i);for(let t=0;t<a;++t)if(p[t]!==u[t]){o=p[t],s=u[t];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},c.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},c.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},c.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return b(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":case"latin1":case"binary":return x(this,t,e,i);case"base64":return k(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function S(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function A(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function B(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=e;r<i;++r)n+=V[t[r]];return n}function N(t,e,i){const r=t.slice(e,i);let n="";for(let t=0;t<r.length-1;t+=2)n+=String.fromCharCode(r[t]+256*r[t+1]);return n}function M(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,i,r,n,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function q(t,e,i,r,n){L(e,r,n,t,i,7);let o=Number(e&BigInt(4294967295));t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,i}function $(t,e,i,r,n){L(e,r,n,t,i,7);let o=Number(e&BigInt(4294967295));t[i+7]=o,o>>=8,t[i+6]=o,o>>=8,t[i+5]=o,o>>=8,t[i+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=s,s>>=8,t[i+2]=s,s>>=8,t[i+1]=s,s>>=8,t[i]=s,i+8}function D(t,e,i,r,n,o){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function C(t,e,i,r,o){return e=+e,i>>>=0,o||D(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function P(t,e,i,r,o){return e=+e,i>>>=0,o||D(t,0,i,8),n.write(t,e,i,r,52,8),i+8}c.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||M(t,e,this.length);let r=this[t],n=1,o=0;for(;++o<e&&(n*=256);)r+=this[t+o]*n;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||M(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||z(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||z(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)})),c.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||M(t,e,this.length);let r=this[t],n=1,o=0;for(;++o<e&&(n*=256);)r+=this[t+o]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||M(t,e,this.length);let r=e,n=1,o=this[t+--r];for(;r>0&&(n*=256);)o+=this[t+--r]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||M(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt16BE=function(t,e){t>>>=0,e||M(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||z(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||z(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||M(t,4,this.length),n.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||M(t,4,this.length),n.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||M(t,8,this.length),n.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||M(t,8,this.length),n.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||U(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||U(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+i},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);U(this,t,e,i,r-1,-r)}let n=0,o=1,s=0;for(this[e]=255&t;++n<i&&(o*=256);)t<0&&0===s&&0!==this[e+n-1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+i},c.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);U(this,t,e,i,r-1,-r)}let n=i-1,o=1,s=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===s&&0!==this[e+n+1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+i},c.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,i){return C(this,t,e,!0,i)},c.prototype.writeFloatBE=function(t,e,i){return C(this,t,e,!1,i)},c.prototype.writeDoubleLE=function(t,e,i){return P(this,t,e,!0,i)},c.prototype.writeDoubleBE=function(t,e,i){return P(this,t,e,!1,i)},c.prototype.copy=function(t,e,i,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},c.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const o=c.isBuffer(t)?t:c.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=o[n%s]}return this};const R={};function F(t,e,i){R[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function L(t,e,i,r,n,o){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new R.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||z(e,t.length-(i+1))}(r,n,o)}function H(t,e){if("number"!=typeof t)throw new R.ERR_INVALID_ARG_TYPE(e,"number",t)}function z(t,e,i){if(Math.floor(t)!==t)throw H(t,i),new R.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new R.ERR_BUFFER_OUT_OF_BOUNDS;throw new R.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=j(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=j(n)),n+="n"),r+=` It must be ${e}. Received ${n}`,r}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function W(t,e){let i;e=e||1/0;const r=t.length;let n=null;const o=[];for(let s=0;s<r;++s){if(i=t.charCodeAt(s),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function X(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function J(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const V=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let n=0;n<16;++n)e[r+n]=t[i]+t[n]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},645:(t,e)=>{e.read=function(t,e,i,r,n){var o,s,a=8*n-r-1,c=(1<<a)-1,p=c>>1,u=-7,h=i?n-1:0,l=i?-1:1,f=t[e+h];for(h+=l,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=l,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=l,u-=8);if(0===o)o=1-p;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=p}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,i,r,n,o){var s,a,c,p=8*o-n-1,u=(1<<p)-1,h=u>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?l/c:l*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,n),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;t[i+f]=255&a,f+=d,a/=256,n-=8);for(s=s<<n|a,p+=n;p>0;t[i+f]=255&s,f+=d,s/=256,p-=8);t[i+f-d]|=128*_}},891:t=>{"use strict";var e,i={DEBUG:!1,LIB_VERSION:"2.41.0"};if("undefined"==typeof window){var r={hostname:""};e={navigator:{userAgent:""},document:{location:r,referrer:""},screen:{width:0,height:0},location:r}}else e=window;var n,o,s,a,c,p,u,h,l,f,d,_=Array.prototype,g=Function.prototype,m=Object.prototype,y=_.slice,v=m.toString,b=m.hasOwnProperty,w=e.console,x=e.navigator,k=e.document,I=e.opera,E=e.screen,T=x.userAgent,O=g.bind,S=_.forEach,A=_.indexOf,B=_.map,N=Array.isArray,M={},U={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},q={log:function(){if(i.DEBUG&&!U.isUndefined(w)&&w)try{w.log.apply(w,arguments)}catch(t){U.each(arguments,(function(t){w.log(t)}))}},warn:function(){if(i.DEBUG&&!U.isUndefined(w)&&w){var t=["Mixpanel warning:"].concat(U.toArray(arguments));try{w.warn.apply(w,t)}catch(e){U.each(t,(function(t){w.warn(t)}))}}},error:function(){if(i.DEBUG&&!U.isUndefined(w)&&w){var t=["Mixpanel error:"].concat(U.toArray(arguments));try{w.error.apply(w,t)}catch(e){U.each(t,(function(t){w.error(t)}))}}},critical:function(){if(!U.isUndefined(w)&&w){var t=["Mixpanel error:"].concat(U.toArray(arguments));try{w.error.apply(w,t)}catch(e){U.each(t,(function(t){w.error(t)}))}}}},$=function(t,e){return function(){return arguments[0]="["+e+"] "+arguments[0],t.apply(q,arguments)}},D=function(t){return{log:$(q.log,t),error:$(q.error,t),critical:$(q.critical,t)}};U.bind=function(t,e){var i,r;if(O&&t.bind===O)return O.apply(t,y.call(arguments,1));if(!U.isFunction(t))throw new TypeError;return i=y.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,i.concat(y.call(arguments)));var n={};n.prototype=t.prototype;var o=new n;n.prototype=null;var s=t.apply(o,i.concat(y.call(arguments)));return Object(s)===s?s:o},r},U.bind_instance_methods=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=U.bind(t[e],t))},U.each=function(t,e,i){if(null!=t)if(S&&t.forEach===S)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,n=t.length;r<n;r++)if(r in t&&e.call(i,t[r],r,t)===M)return}else for(var o in t)if(b.call(t,o)&&e.call(i,t[o],o,t)===M)return},U.escapeHTML=function(t){var e=t;return e&&U.isString(e)&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),e},U.extend=function(t){return U.each(y.call(arguments,1),(function(e){for(var i in e)void 0!==e[i]&&(t[i]=e[i])})),t},U.isArray=N||function(t){return"[object Array]"===v.call(t)},U.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch(t){return!1}},U.isArguments=function(t){return!(!t||!b.call(t,"callee"))},U.toArray=function(t){return t?t.toArray?t.toArray():U.isArray(t)||U.isArguments(t)?y.call(t):U.values(t):[]},U.map=function(t,e,i){if(B&&t.map===B)return t.map(e,i);var r=[];return U.each(t,(function(t){r.push(e.call(i,t))})),r},U.keys=function(t){var e=[];return null===t||U.each(t,(function(t,i){e[e.length]=i})),e},U.values=function(t){var e=[];return null===t||U.each(t,(function(t){e[e.length]=t})),e},U.include=function(t,e){var i=!1;return null===t?i:A&&t.indexOf===A?-1!=t.indexOf(e):(U.each(t,(function(t){if(i||(i=t===e))return M})),i)},U.includes=function(t,e){return-1!==t.indexOf(e)},U.inherit=function(t,e){return t.prototype=new e,t.prototype.constructor=t,t.superclass=e.prototype,t},U.isObject=function(t){return t===Object(t)&&!U.isArray(t)},U.isEmptyObject=function(t){if(U.isObject(t)){for(var e in t)if(b.call(t,e))return!1;return!0}return!1},U.isUndefined=function(t){return void 0===t},U.isString=function(t){return"[object String]"==v.call(t)},U.isDate=function(t){return"[object Date]"==v.call(t)},U.isNumber=function(t){return"[object Number]"==v.call(t)},U.isElement=function(t){return!(!t||1!==t.nodeType)},U.encodeDates=function(t){return U.each(t,(function(e,i){U.isDate(e)?t[i]=U.formatDate(e):U.isObject(e)&&(t[i]=U.encodeDates(e))})),t},U.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},U.formatDate=function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())},U.safewrap=function(t){return function(){try{return t.apply(this,arguments)}catch(t){q.critical("Implementation error. Please turn on debug and contact support@mixpanel.com."),i.DEBUG&&q.critical(t)}}},U.safewrap_class=function(t,e){for(var i=0;i<e.length;i++)t.prototype[e[i]]=U.safewrap(t.prototype[e[i]])},U.safewrap_instance_methods=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=U.safewrap(t[e]))},U.strip_empty_properties=function(t){var e={};return U.each(t,(function(t,i){U.isString(t)&&t.length>0&&(e[i]=t)})),e},U.truncate=function(t,e){var i;return"string"==typeof t?i=t.slice(0,e):U.isArray(t)?(i=[],U.each(t,(function(t){i.push(U.truncate(t,e))}))):U.isObject(t)?(i={},U.each(t,(function(t,r){i[r]=U.truncate(t,e)}))):i=t,i},U.JSONEncode=function(t){var e=function(t){var e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return e.lastIndex=0,e.test(t)?'"'+t.replace(e,(function(t){var e=i[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'},i=function(t,r){var n="",o=0,s="",a="",c=0,p=n,u=[],h=r[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),typeof h){case"string":return e(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(n+="    ",u=[],"[object Array]"===v.apply(h)){for(c=h.length,o=0;o<c;o+=1)u[o]=i(o,h)||"null";return a=0===u.length?"[]":n?"[\n"+n+u.join(",\n"+n)+"\n"+p+"]":"["+u.join(",")+"]",n=p,a}for(s in h)b.call(h,s)&&(a=i(s,h))&&u.push(e(s)+(n?": ":":")+a);return a=0===u.length?"{}":n?"{"+u.join(",")+p+"}":"{"+u.join(",")+"}",n=p,a}};return i("",{"":t})},U.JSONDecode=(c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},p=function(t){var e=new SyntaxError(t);throw e.at=n,e.text=s,e},u=function(t){return t&&t!==o&&p("Expected '"+t+"' instead of '"+o+"'"),o=s.charAt(n),n+=1,o},h=function(){var t,e="";for("-"===o&&(e="-",u("-"));o>="0"&&o<="9";)e+=o,u();if("."===o)for(e+=".";u()&&o>="0"&&o<="9";)e+=o;if("e"===o||"E"===o)for(e+=o,u(),"-"!==o&&"+"!==o||(e+=o,u());o>="0"&&o<="9";)e+=o,u();if(t=+e,isFinite(t))return t;p("Bad number")},l=function(){var t,e,i,r="";if('"'===o)for(;u();){if('"'===o)return u(),r;if("\\"===o)if(u(),"u"===o){for(i=0,e=0;e<4&&(t=parseInt(u(),16),isFinite(t));e+=1)i=16*i+t;r+=String.fromCharCode(i)}else{if("string"!=typeof c[o])break;r+=c[o]}else r+=o}p("Bad string")},f=function(){for(;o&&o<=" ";)u()},a=function(){switch(f(),o){case"{":return function(){var t,e={};if("{"===o){if(u("{"),f(),"}"===o)return u("}"),e;for(;o;){if(t=l(),f(),u(":"),Object.hasOwnProperty.call(e,t)&&p('Duplicate key "'+t+'"'),e[t]=a(),f(),"}"===o)return u("}"),e;u(","),f()}}p("Bad object")}();case"[":return function(){var t=[];if("["===o){if(u("["),f(),"]"===o)return u("]"),t;for(;o;){if(t.push(a()),f(),"]"===o)return u("]"),t;u(","),f()}}p("Bad array")}();case'"':return l();case"-":return h();default:return o>="0"&&o<="9"?h():function(){switch(o){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}p('Unexpected "'+o+'"')}()}},function(t){var e;return s=t,n=0,o=" ",e=a(),f(),o&&p("Syntax error"),e}),U.base64Encode=function(t){var e,i,r,n,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,c=0,p="",u=[];if(!t)return t;t=U.utf8Encode(t);do{e=(o=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,i=o>>12&63,r=o>>6&63,n=63&o,u[c++]=s.charAt(e)+s.charAt(i)+s.charAt(r)+s.charAt(n)}while(a<t.length);switch(p=u.join(""),t.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p},U.utf8Encode=function(t){var e,i,r,n,o="";for(e=i=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,n=0;n<r;n++){var s=t.charCodeAt(n),a=null;s<128?i++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==a&&(i>e&&(o+=t.substring(e,i)),o+=a,e=i=n+1)}return i>e&&(o+=t.substring(e,t.length)),o},U.UUID=(d=function(){for(var t=1*new Date,e=0;t==1*new Date;)e++;return t.toString(16)+e.toString(16)},function(){var t=(E.height*E.width).toString(16);return d()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t,e,i=T,r=[],n=0;function o(t,e){var i,n=0;for(i=0;i<e.length;i++)n|=r[i]<<8*i;return t^n}for(t=0;t<i.length;t++)e=i.charCodeAt(t),r.unshift(255&e),r.length>=4&&(n=o(n,r),r=[]);return r.length>0&&(n=o(n,r)),n.toString(16)}()+"-"+t+"-"+d()});var C=["baiduspider","bingbot","bingpreview","facebookexternal","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];U.isBlockedUA=function(t){var e;for(t=t.toLowerCase(),e=0;e<C.length;e++)if(-1!==t.indexOf(C[e]))return!0;return!1},U.HTTPBuildQuery=function(t,e){var i,r,n=[];return U.isUndefined(e)&&(e="&"),U.each(t,(function(t,e){i=encodeURIComponent(t.toString()),r=encodeURIComponent(e),n[n.length]=r+"="+i})),n.join(e)},U.getQueryParam=function(t,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);if(null===i||i&&"string"!=typeof i[1]&&i[1].length)return"";var r=i[1];try{r=decodeURIComponent(r)}catch(t){q.error("Skipping decoding for malformed query param: "+r)}return r.replace(/\+/g," ")},U.cookie={get:function(t){for(var e=t+"=",i=k.cookie.split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return decodeURIComponent(n.substring(e.length,n.length))}return null},parse:function(t){var e;try{e=U.JSONDecode(U.cookie.get(t))||{}}catch(t){}return e},set_seconds:function(t,e,i,r,n,o,s){var a="",c="",p="";if(s)a="; domain="+s;else if(r){var u=G(k.location.hostname);a=u?"; domain=."+u:""}if(i){var h=new Date;h.setTime(h.getTime()+1e3*i),c="; expires="+h.toGMTString()}o&&(n=!0,p="; SameSite=None"),n&&(p+="; secure"),k.cookie=t+"="+encodeURIComponent(e)+c+"; path=/"+a+p},set:function(t,e,i,r,n,o,s){var a="",c="",p="";if(s)a="; domain="+s;else if(r){var u=G(k.location.hostname);a=u?"; domain=."+u:""}if(i){var h=new Date;h.setTime(h.getTime()+24*i*60*60*1e3),c="; expires="+h.toGMTString()}o&&(n=!0,p="; SameSite=None"),n&&(p+="; secure");var l=t+"="+encodeURIComponent(e)+c+"; path=/"+a+p;return k.cookie=l,l},remove:function(t,e,i){U.cookie.set(t,"",-1,e,!1,!1,i)}};var P=null,R=function(t,e){if(null!==P&&!e)return P;var i=!0;try{t=t||window.localStorage;var r="__mplss_"+j(8);t.setItem(r,"xyz"),"xyz"!==t.getItem(r)&&(i=!1),t.removeItem(r)}catch(t){i=!1}return P=i,i};U.localStorage={is_supported:function(t){var e=R(null,t);return e||q.error("localStorage unsupported; falling back to cookie store"),e},error:function(t){q.error("localStorage error: "+t)},get:function(t){try{return window.localStorage.getItem(t)}catch(t){U.localStorage.error(t)}return null},parse:function(t){try{return U.JSONDecode(U.localStorage.get(t))||{}}catch(t){}return null},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(t){U.localStorage.error(t)}},remove:function(t){try{window.localStorage.removeItem(t)}catch(t){U.localStorage.error(t)}}},U.register_event=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,i,r,n,o){if(e)if(e.addEventListener&&!n)e.addEventListener(i,r,!!o);else{var s="on"+i,a=e[s];e[s]=function(e,i,r){return function(n){if(n=n||t(window.event)){var o,s,a=!0;return U.isFunction(r)&&(o=r(n)),s=i.call(e,n),!1!==o&&!1!==s||(a=!1),a}}}(e,r,a)}else q.error("No valid element provided to register_event")}}();var F=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');U.dom_query=function(){function t(t){return t.all?t.all:t.getElementsByTagName("*")}var e=/[\t\r\n]/g;function i(t,i){var r=" "+i+" ";return(" "+t.className+" ").replace(e," ").indexOf(r)>=0}function r(e){if(!k.getElementsByTagName)return[];var r,n,o,s,a,c,p,u,h,l,f=e.split(" "),d=[k];for(c=0;c<f.length;c++)if((r=f[c].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(n=r.split("#"))[0];var _=n[1],g=k.getElementById(_);if(!g||o&&g.nodeName.toLowerCase()!=o)return[];d=[g]}else if(r.indexOf(".")>-1){o=(n=r.split("."))[0];var m=n[1];for(o||(o="*"),s=[],a=0,p=0;p<d.length;p++)for(h="*"==o?t(d[p]):d[p].getElementsByTagName(o),u=0;u<h.length;u++)s[a++]=h[u];for(d=[],l=0,p=0;p<s.length;p++)s[p].className&&U.isString(s[p].className)&&i(s[p],m)&&(d[l++]=s[p])}else{var y=r.match(F);if(y){o=y[1];var v,b=y[2],w=y[3],x=y[4];for(o||(o="*"),s=[],a=0,p=0;p<d.length;p++)for(h="*"==o?t(d[p]):d[p].getElementsByTagName(o),u=0;u<h.length;u++)s[a++]=h[u];switch(d=[],l=0,w){case"=":v=function(t){return t.getAttribute(b)==x};break;case"~":v=function(t){return t.getAttribute(b).match(new RegExp("\\b"+x+"\\b"))};break;case"|":v=function(t){return t.getAttribute(b).match(new RegExp("^"+x+"-?"))};break;case"^":v=function(t){return 0===t.getAttribute(b).indexOf(x)};break;case"$":v=function(t){return t.getAttribute(b).lastIndexOf(x)==t.getAttribute(b).length-x.length};break;case"*":v=function(t){return t.getAttribute(b).indexOf(x)>-1};break;default:v=function(t){return t.getAttribute(b)}}for(d=[],l=0,p=0;p<s.length;p++)v(s[p])&&(d[l++]=s[p])}else{for(o=r,s=[],a=0,p=0;p<d.length;p++)for(h=d[p].getElementsByTagName(o),u=0;u<h.length;u++)s[a++]=h[u];d=s}}return d}return function(t){return U.isElement(t)?[t]:U.isObject(t)&&!U.isUndefined(t.length)?t:r.call(this,t)}}(),U.info={campaignParams:function(){var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),e="",i={};return U.each(t,(function(t){(e=U.getQueryParam(k.URL,t)).length&&(i[t]=e)})),i},searchEngine:function(t){return 0===t.search("https?://(.*)google.([^/?]*)")?"google":0===t.search("https?://(.*)bing.com")?"bing":0===t.search("https?://(.*)yahoo.com")?"yahoo":0===t.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(t){var e=U.info.searchEngine(t),i="yahoo"!=e?"q":"p",r={};if(null!==e){r.$search_engine=e;var n=U.getQueryParam(t,i);n.length&&(r.mp_keyword=n)}return r},browser:function(t,e,i){return e=e||"",i||U.includes(t," OPR/")?U.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":U.includes(t,"IEMobile")||U.includes(t,"WPDesktop")?"Internet Explorer Mobile":U.includes(t,"SamsungBrowser/")?"Samsung Internet":U.includes(t,"Edge")||U.includes(t,"Edg/")?"Microsoft Edge":U.includes(t,"FBIOS")?"Facebook Mobile":U.includes(t,"Chrome")?"Chrome":U.includes(t,"CriOS")?"Chrome iOS":U.includes(t,"UCWEB")||U.includes(t,"UCBrowser")?"UC Browser":U.includes(t,"FxiOS")?"Firefox iOS":U.includes(e,"Apple")?U.includes(t,"Mobile")?"Mobile Safari":"Safari":U.includes(t,"Android")?"Android Mobile":U.includes(t,"Konqueror")?"Konqueror":U.includes(t,"Firefox")?"Firefox":U.includes(t,"MSIE")||U.includes(t,"Trident/")?"Internet Explorer":U.includes(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,i){var r={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[U.info.browser(t,e,i)];if(void 0===r)return null;var n=t.match(r);return n?parseFloat(n[n.length-2]):null},os:function(){var t=T;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)?"Android":""},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},properties:function(){return U.extend(U.strip_empty_properties({$os:U.info.os(),$browser:U.info.browser(T,x.vendor,I),$referrer:k.referrer,$referring_domain:U.info.referringDomain(k.referrer),$device:U.info.device(T)}),{$current_url:e.location.href,$browser_version:U.info.browserVersion(T,x.vendor,I),$screen_height:E.height,$screen_width:E.width,mp_lib:"web",$lib_version:i.LIB_VERSION,$insert_id:j(),time:U.timestamp()/1e3})},people_properties:function(){return U.extend(U.strip_empty_properties({$os:U.info.os(),$browser:U.info.browser(T,x.vendor,I)}),{$browser_version:U.info.browserVersion(T,x.vendor,I)})},pageviewInfo:function(t){return U.strip_empty_properties({mp_page:t,mp_referrer:k.referrer,mp_browser:U.info.browser(T,x.vendor,I),mp_platform:U.info.os()})}};var j=function(t){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return t?e.substring(0,t):e},L=U.safewrap((function(t,e,i){t+=e;for(var r=5381,n=0;n<t.length;n++)r=(r<<5)+r+t.charCodeAt(n),r&=r;return(r>>>0)%100<i})),H=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,z=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,G=function(t){var e=z,i=t.split("."),r=i[i.length-1];(r.length>4||"com"===r||"org"===r)&&(e=H);var n=t.match(e);return n?n[0]:""},W=null,X=null;"undefined"!=typeof JSON&&(W=JSON.stringify,X=JSON.parse),W=W||U.JSONEncode,X=X||U.JSONDecode,U.toArray=U.toArray,U.isObject=U.isObject,U.JSONEncode=U.JSONEncode,U.JSONDecode=U.JSONDecode,U.isBlockedUA=U.isBlockedUA,U.isEmptyObject=U.isEmptyObject,U.info=U.info,U.info.device=U.info.device,U.info.browser=U.info.browser,U.info.browserVersion=U.info.browserVersion,U.info.properties=U.info.properties;var Y=function(){};Y.prototype.create_properties=function(){},Y.prototype.event_handler=function(){},Y.prototype.after_track_handler=function(){},Y.prototype.init=function(t){return this.mp=t,this},Y.prototype.track=function(t,e,i,r){var n=this,o=U.dom_query(t);if(0!==o.length)return U.each(o,(function(t){U.register_event(t,this.override_event,(function(t){var o={},s=n.create_properties(i,this),a=n.mp.get_config("track_links_timeout");n.event_handler(t,this,o),window.setTimeout(n.track_callback(r,s,o,!0),a),n.mp.track(e,s,n.track_callback(r,s,o))}))}),this),!0;q.error("The DOM query ("+t+") returned 0 elements")},Y.prototype.track_callback=function(t,e,i,r){r=r||!1;var n=this;return function(){i.callback_fired||(i.callback_fired=!0,t&&!1===t(r,e)||n.after_track_handler(e,i,r))}},Y.prototype.create_properties=function(t,e){return"function"==typeof t?t(e):U.extend({},t)};var J=function(){this.override_event="click"};U.inherit(J,Y),J.prototype.create_properties=function(t,e){var i=J.superclass.create_properties.apply(this,arguments);return e.href&&(i.url=e.href),i},J.prototype.event_handler=function(t,e,i){i.new_tab=2===t.which||t.metaKey||t.ctrlKey||"_blank"===e.target,i.href=e.href,i.new_tab||t.preventDefault()},J.prototype.after_track_handler=function(t,e){e.new_tab||setTimeout((function(){window.location=e.href}),0)};var K=function(){this.override_event="submit"};U.inherit(K,Y),K.prototype.event_handler=function(t,e,i){i.element=e,t.preventDefault()},K.prototype.after_track_handler=function(t,e){setTimeout((function(){e.element.submit()}),0)};var V=D("lock"),Q=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3};Q.prototype.withLock=function(t,e,i){i||"function"==typeof e||(i=e,e=null);var r=i||(new Date).getTime()+"|"+Math.random(),n=(new Date).getTime(),o=this.storageKey,s=this.pollIntervalMS,a=this.timeoutMS,c=this.storage,p=o+":X",u=o+":Y",h=o+":Z",l=function(t){e&&e(t)},f=function(t){if((new Date).getTime()-n>a)return V.error("Timeout waiting for mutex on "+o+"; clearing lock. ["+r+"]"),c.removeItem(h),c.removeItem(u),void g();setTimeout((function(){try{t()}catch(t){l(t)}}),s*(Math.random()+.1))},d=function(t,e){t()?e():f((function(){d(t,e)}))},_=function(){var t=c.getItem(u);if(t&&t!==r)return!1;if(c.setItem(u,r),c.getItem(u)===r)return!0;if(!R(c,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},g=function(){c.setItem(p,r),d(_,(function(){c.getItem(p)!==r?f((function(){c.getItem(u)===r?d((function(){return!c.getItem(h)}),m):g()})):m()}))},m=function(){c.setItem(h,"1");try{t()}finally{c.removeItem(h),c.getItem(u)===r&&c.removeItem(u),c.getItem(p)===r&&c.removeItem(p)}};try{if(!R(c,!0))throw new Error("localStorage support check failed");g()}catch(t){l(t)}};var Z=D("batch"),tt=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.lock=new Q(t,{storage:this.storage}),this.pid=e.pid||null,this.memQueue=[]};tt.prototype.enqueue=function(t,e,i){var r={id:j(),flushAfter:(new Date).getTime()+2*e,payload:t};this.lock.withLock(U.bind((function(){var e;try{var n=this.readFromStorage();n.push(r),(e=this.saveToStorage(n))&&this.memQueue.push(r)}catch(i){Z.error("Error enqueueing item",t),e=!1}i&&i(e)}),this),(function(t){Z.error("Error acquiring storage lock",t),i&&i(!1)}),this.pid)},tt.prototype.fillBatch=function(t){var e=this.memQueue.slice(0,t);if(e.length<t){var i=this.readFromStorage();if(i.length){var r={};U.each(e,(function(t){r[t.id]=!0}));for(var n=0;n<i.length;n++){var o=i[n];if((new Date).getTime()>o.flushAfter&&!r[o.id]&&(o.orphaned=!0,e.push(o),e.length>=t))break}}}return e};var et=function(t,e){var i=[];return U.each(t,(function(t){t.id&&!e[t.id]&&i.push(t)})),i};tt.prototype.removeItemsByID=function(t,e){var i={};U.each(t,(function(t){i[t]=!0})),this.memQueue=et(this.memQueue,i),this.lock.withLock(U.bind((function(){var r;try{var n=this.readFromStorage();n=et(n,i),r=this.saveToStorage(n)}catch(e){Z.error("Error removing items",t),r=!1}e&&e(r)}),this),(function(t){Z.error("Error acquiring storage lock",t),e&&e(!1)}),this.pid)};var it=function(t,e){var i=[];return U.each(t,(function(t){var r=t.id;if(r in e){var n=e[r];null!==n&&(t.payload=n,i.push(t))}else i.push(t)})),i};tt.prototype.updatePayloads=function(t,e){this.memQueue=it(this.memQueue,t),this.lock.withLock(U.bind((function(){var i;try{var r=this.readFromStorage();r=it(r,t),i=this.saveToStorage(r)}catch(e){Z.error("Error updating items",t),i=!1}e&&e(i)}),this),(function(t){Z.error("Error acquiring storage lock",t),e&&e(!1)}),this.pid)},tt.prototype.readFromStorage=function(){var t;try{(t=this.storage.getItem(this.storageKey))&&(t=X(t),U.isArray(t)||(Z.error("Invalid storage entry:",t),t=null))}catch(e){Z.error("Error retrieving queue",e),t=null}return t||[]},tt.prototype.saveToStorage=function(t){try{return this.storage.setItem(this.storageKey,W(t)),!0}catch(t){return Z.error("Error saving queue",t),!1}},tt.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var rt=D("batch"),nt=function(t,e){this.queue=new tt(t,{storage:e.storage}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart};function ot(t,e){gt(!0,t,e)}function st(t,e){gt(!1,t,e)}function at(t,e){return"1"===_t(t,e)}function ct(t,i){if(function(t){if(t&&t.ignoreDnt)return!1;var i=t&&t.window||e,r=i.navigator||{},n=!1;return U.each([r.doNotTrack,r.msDoNotTrack,i.doNotTrack],(function(t){U.includes([!0,1,"1","yes"],t)&&(n=!0)})),n}(i))return q.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var r="0"===_t(t,i);return r&&q.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),r}function pt(t){return mt(t,(function(t){return this.get_config(t)}))}function ut(t){return mt(t,(function(t){return this._get_config(t)}))}function ht(t){return mt(t,(function(t){return this._get_config(t)}))}function lt(t,e){ft(e=e||{}).remove(dt(t,e),!!e.crossSubdomainCookie,e.cookieDomain)}function ft(t){return"localStorage"===(t=t||{}).persistenceType?U.localStorage:U.cookie}function dt(t,e){return((e=e||{}).persistencePrefix||"__mp_opt_in_out_")+t}function _t(t,e){return ft(e).get(dt(t,e))}function gt(t,e,i){U.isString(e)&&e.length?(ft(i=i||{}).set(dt(e,i),t?1:0,U.isNumber(i.cookieExpiration)?i.cookieExpiration:null,!!i.crossSubdomainCookie,!!i.secureCookie,!!i.crossSiteCookie,i.cookieDomain),i.track&&t&&i.track(i.trackEventName||"$opt_in",i.trackProperties,{send_immediately:!0})):q.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}function mt(t,e){return function(){var i=!1;try{var r=e.call(this,"token"),n=e.call(this,"ignore_dnt"),o=e.call(this,"opt_out_tracking_persistence_type"),s=e.call(this,"opt_out_tracking_cookie_prefix"),a=e.call(this,"window");r&&(i=ct(r,{ignoreDnt:n,persistenceType:o,persistencePrefix:s,window:a}))}catch(t){q.error("Unexpected error when checking tracking opt-out status: "+t)}if(!i)return t.apply(this,arguments);var c=arguments[arguments.length-1];"function"==typeof c&&c(0)}}nt.prototype.enqueue=function(t,e){this.queue.enqueue(t,this.flushInterval,e)},nt.prototype.start=function(){this.stopped=!1,this.flush()},nt.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},nt.prototype.clear=function(){this.queue.clear()},nt.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},nt.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},nt.prototype.scheduleFlush=function(t){this.flushInterval=t,this.stopped||(this.timeoutID=setTimeout(U.bind(this.flush,this),this.flushInterval))},nt.prototype.flush=function(t){try{if(this.requestInProgress)return void rt.log("Flush: Request already in progress");t=t||{};var e=this.libConfig.batch_request_timeout_ms,i=(new Date).getTime(),r=this.batchSize,n=this.queue.fillBatch(r),o=[],s={};if(U.each(n,(function(t){var e=t.payload;this.beforeSendHook&&!t.orphaned&&(e=this.beforeSendHook(e)),e&&o.push(e),s[t.id]=e}),this),o.length<1)return void this.resetFlush();this.requestInProgress=!0;var a=U.bind((function(o){this.requestInProgress=!1;try{var a=!1;if(t.unloading)this.queue.updatePayloads(s);else if(U.isObject(o)&&"timeout"===o.error&&(new Date).getTime()-i>=e)rt.error("Network timeout; retrying"),this.flush();else if(U.isObject(o)&&o.xhr_req&&(o.xhr_req.status>=500||o.xhr_req.status<=0)){var c=2*this.flushInterval,p=o.xhr_req.responseHeaders;if(p){var u=p["Retry-After"];u&&(c=1e3*parseInt(u,10)||c)}c=Math.min(6e5,c),rt.error("Error; retry in "+c+" ms"),this.scheduleFlush(c)}else if(U.isObject(o)&&o.xhr_req&&413===o.xhr_req.status)if(n.length>1){var h=Math.max(1,Math.floor(r/2));this.batchSize=Math.min(this.batchSize,h,n.length-1),rt.error("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else rt.error("Single-event request too large; dropping",n),this.resetBatchSize(),a=!0;else a=!0;a&&this.queue.removeItemsByID(U.map(n,(function(t){return t.id})),U.bind(this.flush,this))}catch(t){rt.error("Error handling API response",t),this.resetFlush()}}),this),c={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};t.unloading&&(c.transport="sendBeacon"),rt.log("MIXPANEL REQUEST:",o),this.sendRequest(o,c,a)}catch(t){rt.error("Error flushing request queue",t),this.resetFlush()}};var yt="$set",vt="$set_once",bt="$unset",wt="$add",xt="$append",kt="$union",It="$remove",Et={set_action:function(t,e){var i={},r={};return U.isObject(t)?U.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,i.$set=r,i},unset_action:function(t){var e={},i=[];return U.isArray(t)||(t=[t]),U.each(t,(function(t){this._is_reserved_property(t)||i.push(t)}),this),e.$unset=i,e},set_once_action:function(t,e){var i={},r={};return U.isObject(t)?U.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,i.$set_once=r,i},union_action:function(t,e){var i={},r={};return U.isObject(t)?U.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=U.isArray(t)?t:[t])}),this):r[t]=U.isArray(e)?e:[e],i.$union=r,i},append_action:function(t,e){var i={},r={};return U.isObject(t)?U.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,i.$append=r,i},remove_action:function(t,e){var i={},r={};return U.isObject(t)?U.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,i.$remove=r,i},delete_action:function(){return{$delete:""}}},Tt=function(){};U.extend(Tt.prototype,Et),Tt.prototype._init=function(t,e,i){this._mixpanel=t,this._group_key=e,this._group_id=i},Tt.prototype.set=ht((function(t,e,i){var r=this.set_action(t,e);return U.isObject(t)&&(i=e),this._send_request(r,i)})),Tt.prototype.set_once=ht((function(t,e,i){var r=this.set_once_action(t,e);return U.isObject(t)&&(i=e),this._send_request(r,i)})),Tt.prototype.unset=ht((function(t,e){var i=this.unset_action(t);return this._send_request(i,e)})),Tt.prototype.union=ht((function(t,e,i){U.isObject(t)&&(i=e);var r=this.union_action(t,e);return this._send_request(r,i)})),Tt.prototype.delete=ht((function(t){var e=this.delete_action();return this._send_request(e,t)})),Tt.prototype.remove=ht((function(t,e,i){var r=this.remove_action(t,e);return this._send_request(r,i)})),Tt.prototype._send_request=function(t,e){t.$group_key=this._group_key,t.$group_id=this._group_id,t.$token=this._get_config("token");var i=U.encodeDates(t);return this._mixpanel._track_or_batch({type:"groups",data:i,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},e)},Tt.prototype._is_reserved_property=function(t){return"$group_key"===t||"$group_id"===t},Tt.prototype._get_config=function(t){return this._mixpanel.get_config(t)},Tt.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},Tt.prototype.remove=Tt.prototype.remove,Tt.prototype.set=Tt.prototype.set,Tt.prototype.set_once=Tt.prototype.set_once,Tt.prototype.union=Tt.prototype.union,Tt.prototype.unset=Tt.prototype.unset,Tt.prototype.toString=Tt.prototype.toString;var Ot="__mps",St="__mpso",At="__mpus",Bt="__mpa",Nt="__mpap",Mt="__mpr",Ut="__mpu",qt="$people_distinct_id",$t="__alias",Dt=[Ot,St,At,Bt,Nt,Mt,Ut,qt,$t,"__cmpns","__timers"],Ct=function(t){this.props={},this.campaign_params_saved=!1,t.persistence_name?this.name="mp_"+t.persistence_name:this.name="mp_"+t.token+"_mixpanel";var e=t.persistence;"cookie"!==e&&"localStorage"!==e&&(q.critical("Unknown persistence type "+e+"; falling back to cookie"),e=t.persistence="cookie"),"localStorage"===e&&U.localStorage.is_supported()?this.storage=U.localStorage:this.storage=U.cookie,this.load(),this.update_config(t),this.upgrade(t),this.save()};Ct.prototype.properties=function(){var t={};return U.each(this.props,(function(e,i){U.include(Dt,i)||(t[i]=e)})),t},Ct.prototype.load=function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=U.extend({},t))}},Ct.prototype.upgrade=function(t){var e,i,r=t.upgrade;r&&(e="mp_super_properties","string"==typeof r&&(e=r),i=this.storage.parse(e),this.storage.remove(e),this.storage.remove(e,!0),i&&(this.props=U.extend(this.props,i.all,i.events))),t.cookie_name||"mixpanel"===t.name||(e="mp_"+t.token+"_"+t.name,(i=this.storage.parse(e))&&(this.storage.remove(e),this.storage.remove(e,!0),this.register_once(i))),this.storage===U.localStorage&&(i=U.cookie.parse(this.name),U.cookie.remove(this.name),U.cookie.remove(this.name,!0),i&&this.register_once(i))},Ct.prototype.save=function(){this.disabled||(this._expire_notification_campaigns(),this.storage.set(this.name,U.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain))},Ct.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},Ct.prototype.clear=function(){this.remove(),this.props={}},Ct.prototype.register_once=function(t,e,i){return!!U.isObject(t)&&(void 0===e&&(e="None"),this.expire_days=void 0===i?this.default_expiry:i,U.each(t,(function(t,i){this.props.hasOwnProperty(i)&&this.props[i]!==e||(this.props[i]=t)}),this),this.save(),!0)},Ct.prototype.register=function(t,e){return!!U.isObject(t)&&(this.expire_days=void 0===e?this.default_expiry:e,U.extend(this.props,t),this.save(),!0)},Ct.prototype.unregister=function(t){t in this.props&&(delete this.props[t],this.save())},Ct.prototype._expire_notification_campaigns=U.safewrap((function(){var t=this.props.__cmpns,e=i.DEBUG?6e4:36e5;if(t){for(var r in t)1*new Date-t[r]>e&&delete t[r];U.isEmptyObject(t)&&delete this.props.__cmpns}})),Ct.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(U.info.campaignParams()),this.campaign_params_saved=!0)},Ct.prototype.update_search_keyword=function(t){this.register(U.info.searchInfo(t))},Ct.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:U.info.referringDomain(t)||"$direct"},"")},Ct.prototype.get_referrer_info=function(){return U.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},Ct.prototype.safe_merge=function(t){return U.each(this.props,(function(e,i){i in t||(t[i]=e)})),t},Ct.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cookie_domain(t.cookie_domain),this.set_cross_site(t.cross_site_cookie),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)},Ct.prototype.set_disabled=function(t){this.disabled=t,this.disabled?this.remove():this.save()},Ct.prototype.set_cookie_domain=function(t){t!==this.cookie_domain&&(this.remove(),this.cookie_domain=t,this.save())},Ct.prototype.set_cross_site=function(t){t!==this.cross_site&&(this.cross_site=t,this.remove(),this.save())},Ct.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())},Ct.prototype.get_cross_subdomain=function(){return this.cross_subdomain},Ct.prototype.set_secure=function(t){t!==this.secure&&(this.secure=!!t,this.remove(),this.save())},Ct.prototype._add_to_people_queue=function(t,e){var i=this._get_queue_key(t),r=e[t],n=this._get_or_create_queue(yt),o=this._get_or_create_queue(vt),s=this._get_or_create_queue(bt),a=this._get_or_create_queue(wt),c=this._get_or_create_queue(kt),p=this._get_or_create_queue(It,[]),u=this._get_or_create_queue(xt,[]);i===Ot?(U.extend(n,r),this._pop_from_people_queue(wt,r),this._pop_from_people_queue(kt,r),this._pop_from_people_queue(bt,r)):i===St?(U.each(r,(function(t,e){e in o||(o[e]=t)})),this._pop_from_people_queue(bt,r)):i===At?U.each(r,(function(t){U.each([n,o,a,c],(function(e){t in e&&delete e[t]})),U.each(u,(function(e){t in e&&delete e[t]})),s[t]=!0})):i===Bt?(U.each(r,(function(t,e){e in n?n[e]+=t:(e in a||(a[e]=0),a[e]+=t)}),this),this._pop_from_people_queue(bt,r)):i===Ut?(U.each(r,(function(t,e){U.isArray(t)&&(e in c||(c[e]=[]),c[e]=c[e].concat(t))})),this._pop_from_people_queue(bt,r)):i===Mt?(p.push(r),this._pop_from_people_queue(xt,r)):i===Nt&&(u.push(r),this._pop_from_people_queue(bt,r)),q.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),q.log(e),this.save()},Ct.prototype._pop_from_people_queue=function(t,e){var i=this._get_queue(t);U.isUndefined(i)||(U.each(e,(function(e,r){t===xt||t===It?U.each(i,(function(t){t[r]===e&&delete t[r]})):delete i[r]}),this),this.save())},Ct.prototype._get_queue_key=function(t){return t===yt?Ot:t===vt?St:t===bt?At:t===wt?Bt:t===xt?Nt:t===It?Mt:t===kt?Ut:void q.error("Invalid queue:",t)},Ct.prototype._get_queue=function(t){return this.props[this._get_queue_key(t)]},Ct.prototype._get_or_create_queue=function(t,e){var i=this._get_queue_key(t);return e=U.isUndefined(e)?{}:e,this.props[i]||(this.props[i]=e)},Ct.prototype.set_event_timer=function(t,e){var i=this.props.__timers||{};i[t]=e,this.props.__timers=i,this.save()},Ct.prototype.remove_event_timer=function(t){var e=(this.props.__timers||{})[t];return U.isUndefined(e)||(delete this.props.__timers[t],this.save()),e};var Pt="in",Rt="not in",Ft="-",jt="*",Lt="/",Ht="%",zt="==",Gt="!=",Wt=">",Xt="<",Yt=">=",Jt="<=",Kt="boolean",Vt="datetime",Qt="list",Zt="number",te="string",ee="defined",ie="not defined";function re(t){if(null===t)return null;switch(typeof t){case"object":return U.isDate(t)&&t.getTime()>=0?t.getTime():null;case"boolean":return Number(t);case"number":return t;case"string":return t=Number(t),isNaN(t)?0:t}return null}function ne(t){if(null===t)return!1;switch(typeof t){case"boolean":return t;case"number":return 0!==t;case"string":return t.length>0;case"object":return!!(U.isArray(t)&&t.length>0)||!!(U.isDate(t)&&t.getTime()>0)||!(!U.isObject(t)||U.isEmptyObject(t))}return!1}function oe(t,e){if(!t.operator)throw"Invalid operator: operator key missing "+t;switch(t.operator){case"and":return function(t,e){if(!t.operator||"and"!==t.operator||!t.children||2!==t.children.length)throw"Invalid operator: AND "+t;return ne(se(t.children[0],e))&&ne(se(t.children[1],e))}(t,e);case"or":return function(t,e){if(!t.operator||"or"!==t.operator||!t.children||2!==t.children.length)throw"Invalid operator: OR "+t;return ne(se(t.children[0],e))||ne(se(t.children[1],e))}(t,e);case Pt:case Rt:return function(t,e){if(!t.operator||-1===[Pt,Rt].indexOf(t.operator)||!t.children||2!==t.children.length)throw"Invalid operator: IN/NOT IN "+t;var i=se(t.children[0],e),r=se(t.children[1],e);if(!U.isArray(r)&&!U.isString(r))throw"Invalid operand for operator IN: invalid type"+r;var n=r.indexOf(i)>-1;return t.operator===Rt?!n:n}(t,e);case"+":return function(t,e){if(!t.operator||"+"!==t.operator||!t.children||t.children.length<2)throw"Invalid operator: PLUS "+t;var i=se(t.children[0],e),r=se(t.children[1],e);return"number"==typeof i&&"number"==typeof r||"string"==typeof i&&"string"==typeof r?i+r:null}(t,e);case Ft:case jt:case Lt:case Ht:return function(t,e){if(!t.operator||-1===[Ft,jt,Lt,Ht].indexOf(t.operator)||!t.children||t.children.length<2)throw"Invalid arithmetic operator "+t;var i=se(t.children[0],e),r=se(t.children[1],e);if("number"==typeof i&&"number"==typeof r)switch(t.operator){case Ft:return i-r;case jt:return i*r;case Lt:return 0!==r?i/r:null;case Ht:return 0===r?null:0===i?0:i<0&&r>0||i>0&&r<0?-(Math.floor(i/r)*r-i):i%r;default:throw"Unknown operator: "+t.operator}return null}(t,e);case zt:case Gt:return function(t,e){if(!t.operator||-1===[zt,Gt].indexOf(t.operator)||!t.children||2!==t.children.length)throw"Invalid equality operator "+t;var i=function(t,e){if(null===t&&t===e)return!0;if(typeof t==typeof e)switch(typeof t){case"number":case"string":case"boolean":return t===e;case"object":if(U.isArray(t)&&U.isArray(e))return function(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t,e);if(U.isDate(t)&&U.isDate(e))return t.getTime()===e.getTime();if(U.isObject(t)&&U.isObject(e))return JSON.stringify(t)===JSON.stringify(e)}return!1}(se(t.children[0],e),se(t.children[1],e));switch(t.operator){case zt:return i;case Gt:return!i}}(t,e);case Wt:case Xt:case Yt:case Jt:return function(t,e){if(!t.operator||-1===[Wt,Yt,Xt,Jt].indexOf(t.operator)||!t.children||2!==t.children.length)throw"Invalid comparison operator "+t;var i=se(t.children[0],e),r=se(t.children[1],e);if(typeof i==typeof r)if("number"==typeof r||U.isDate(r))switch(i=re(i),r=re(r),t.operator){case Wt:return i>r;case Yt:return i>=r;case Xt:return i<r;case Jt:return i<=r}else if("string"==typeof r){var n=i.localeCompare(r);switch(t.operator){case Wt:return n>0;case Yt:return n>=0;case Xt:return n<0;case Jt:return n<=0}}return null}(t,e);case Kt:return function(t,e){if(!t.operator||t.operator!==Kt||!t.children||1!==t.children.length)throw"Invalid cast operator: boolean "+t;return ne(se(t.children[0],e))}(t,e);case Vt:return function(t,e){if(!t.operator||t.operator!==Vt||!t.children||1!==t.children.length)throw"Invalid cast operator: datetime "+t;var i=se(t.children[0],e);if(null===i)return null;switch(typeof i){case"number":case"string":var r=new Date(i);return isNaN(r.getTime())?null:r;case"object":if(U.isDate(i))return i}return null}(t,e);case Qt:return function(t,e){if(!t.operator||t.operator!==Qt||!t.children||1!==t.children.length)throw"Invalid cast operator: list "+t;var i=se(t.children[0],e);return null===i?null:U.isArray(i)?i:null}(t,e);case Zt:return function(t,e){if(!t.operator||t.operator!==Zt||!t.children||1!==t.children.length)throw"Invalid cast operator: number "+t;return re(se(t.children[0],e))}(t,e);case te:return function(t,e){if(!t.operator||t.operator!==te||!t.children||1!==t.children.length)throw"Invalid cast operator: string "+t;var i=se(t.children[0],e);return"object"==typeof i?U.isDate(i)?i.toJSON():JSON.stringify(i):String(i)}(t,e);case ee:case ie:return function(t,e){if(!t.operator||-1===[ee,ie].indexOf(t.operator)||!t.children||1!==t.children.length)throw"Invalid defined/not defined operator: "+t;var i=null!==se(t.children[0],e);return t.operator===ie?!i:i}(t,e);case"not":return function(t,e){if(!t.operator||"not"!==t.operator||!t.children||1!==t.children.length)throw"Invalid not operator: "+t;var i=se(t.children[0],e);return null===i||("boolean"==typeof i?!i:null)}(t,e)}}function se(t,e){return t.property?function(t,e){if(!t.property||!t.value)throw"Invalid operand: missing required keys "+t;switch(t.property){case"event":return void 0!==e[t.value]?e[t.value]:null;case"literal":return"now"===t.value?new Date:"object"==typeof t.value?function(t){var e=t.window;if(!e||!e.unit||!e.value)throw"Invalid window: missing required keys "+JSON.stringify(t);var i=new Date;switch(e.unit){case"hour":i.setTime(i.getTime()+-1*e.value*60*60*1e3);break;case"day":i.setTime(i.getTime()+-1*e.value*24*60*60*1e3);break;case"week":i.setTime(i.getTime()+-1*e.value*7*24*60*60*1e3);break;case"month":i.setTime(i.getTime()+-1*e.value*30*24*60*60*1e3);break;default:throw"Invalid unit: "+e.unit}return i}(t.value):t.value;default:throw"Invalid operand: Invalid property type "+t.property}}(t,e):t.operator?oe(t,e):void 0}var ae=function(t,e){U.bind_instance_methods(this),this.mixpanel=e,this.persistence=this.mixpanel.persistence,this.resource_protocol=this.mixpanel.get_config("inapp_protocol"),this.cdn_host=this.mixpanel.get_config("cdn"),this.campaign_id=U.escapeHTML(t.id),this.message_id=U.escapeHTML(t.message_id),this.body=(U.escapeHTML(t.body)||"").replace(/\n/g,"<br/>"),this.cta=U.escapeHTML(t.cta)||"Close",this.notif_type=U.escapeHTML(t.type)||"takeover",this.style=U.escapeHTML(t.style)||"light",this.title=U.escapeHTML(t.title)||"",this.video_width=ae.VIDEO_WIDTH,this.video_height=ae.VIDEO_HEIGHT,this.display_triggers=t.display_triggers||[],this.dest_url=t.cta_url||null,this.image_url=t.image_url||null,this.thumb_image_url=t.thumb_image_url||null,this.video_url=t.video_url||null,this.thumb_image_url&&0===this.thumb_image_url.indexOf("//")&&(this.thumb_image_url=this.thumb_image_url.replace("//",this.resource_protocol)),this.clickthrough=!0,this.dest_url||(this.dest_url="#dismiss",this.clickthrough=!1),this.mini="mini"===this.notif_type,this.mini||(this.notif_type="takeover"),this.notif_width=this.mini?ae.NOTIF_WIDTH_MINI:ae.NOTIF_WIDTH,this._set_client_config(),this.imgs_to_preload=this._init_image_html(),this._init_video()};ae.ANIM_TIME=200,ae.MARKUP_PREFIX="mixpanel-notification",ae.BG_OPACITY=.6,ae.NOTIF_TOP=25,ae.NOTIF_START_TOP=200,ae.NOTIF_WIDTH=388,ae.NOTIF_WIDTH_MINI=420,ae.NOTIF_HEIGHT_MINI=85,ae.THUMB_BORDER_SIZE=5,ae.THUMB_IMG_SIZE=60,ae.THUMB_OFFSET=Math.round(ae.THUMB_IMG_SIZE/2),ae.VIDEO_WIDTH=595,ae.VIDEO_HEIGHT=334,ae.prototype.show=function(){var t=this;this._set_client_config(),this.body_el?(this._init_styles(),this._init_notification_el(),this._preload_images(this._attach_and_animate)):setTimeout((function(){t.show()}),300)},ae.prototype.dismiss=U.safewrap((function(){this.marked_as_shown||this._mark_delivery({invisible:!0});var t,e,i,r=this.showing_video?this._get_el("video"):this._get_notification_display_el();this.use_transitions?(this._remove_class("bg","visible"),this._add_class(r,"exiting"),setTimeout(this._remove_notification_el,ae.ANIM_TIME)):(this.mini?(t="right",e=20,i=-100):(t="top",e=ae.NOTIF_TOP,i=ae.NOTIF_START_TOP+ae.NOTIF_TOP),this._animate_els([{el:this._get_el("bg"),attr:"opacity",start:ae.BG_OPACITY,goal:0},{el:r,attr:"opacity",start:1,goal:0},{el:r,attr:t,start:e,goal:i}],ae.ANIM_TIME,this._remove_notification_el))})),ae.prototype._add_class=U.safewrap((function(t,e){e=ae.MARKUP_PREFIX+"-"+e,"string"==typeof t&&(t=this._get_el(t)),t.className?~(" "+t.className+" ").indexOf(" "+e+" ")||(t.className+=" "+e):t.className=e})),ae.prototype._remove_class=U.safewrap((function(t,e){e=ae.MARKUP_PREFIX+"-"+e,"string"==typeof t&&(t=this._get_el(t)),t.className&&(t.className=(" "+t.className+" ").replace(" "+e+" ","").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,""))})),ae.prototype._animate_els=U.safewrap((function(t,e,i,r){var n,o,s,a=this,c=!1,p=1*new Date;for(s=p-(r=r||p),n=0;n<t.length;n++)if(void 0===(o=t[n]).val&&(o.val=o.start),o.val!==o.goal){c=!0;var u=o.goal-o.start,h=o.goal>=o.start?1:-1;o.val=o.start+u*s/e,"opacity"!==o.attr&&(o.val=Math.round(o.val)),(h>0&&o.val>=o.goal||h<0&&o.val<=o.goal)&&(o.val=o.goal)}if(c){for(n=0;n<t.length;n++)if((o=t[n]).el){var l="opacity"===o.attr?"":"px";o.el.style[o.attr]=String(o.val)+l}setTimeout((function(){a._animate_els(t,e,i,r)}),10)}else i&&i()})),ae.prototype._attach_and_animate=U.safewrap((function(){var t=this;if(!this.shown&&!this._get_shown_campaigns()[this.campaign_id]){this.shown=!0,this.body_el.appendChild(this.notification_el),setTimeout((function(){var e,i,r,n=t._get_notification_display_el();t.use_transitions?(t.mini||t._add_class("bg","visible"),t._add_class(n,"visible"),t._mark_as_shown()):(t.mini?(e="right",i=-100,r=20):(e="top",i=ae.NOTIF_START_TOP+ae.NOTIF_TOP,r=ae.NOTIF_TOP),t._animate_els([{el:t._get_el("bg"),attr:"opacity",start:0,goal:ae.BG_OPACITY},{el:n,attr:"opacity",start:0,goal:1},{el:n,attr:e,start:i,goal:r}],ae.ANIM_TIME,t._mark_as_shown))}),100),U.register_event(t._get_el("cancel"),"click",(function(e){e.preventDefault(),t.dismiss()}));var e=t._get_el("button")||t._get_el("mini-content");U.register_event(e,"click",(function(e){if(e.preventDefault(),t.show_video)t._track_event("$campaign_open",{$resource_type:"video"}),t._switch_to_video();else if(t.dismiss(),t.clickthrough){var i=null;t.mixpanel.get_config("inapp_link_new_window")?window.open(t.dest_url):i=function(){window.location.href=t.dest_url},t._track_event("$campaign_open",{$resource_type:"link"},i)}}))}})),ae.prototype._get_el=function(t){return document.getElementById(ae.MARKUP_PREFIX+"-"+t)},ae.prototype._get_notification_display_el=function(){return this._get_el(this.notif_type)},ae.prototype._get_shown_campaigns=function(){return this.persistence.props.__cmpns||(this.persistence.props.__cmpns={})},ae.prototype._matches_event_data=U.safewrap((function(t){for(var e=t.event||"",i=0;i<this.display_triggers.length;i++){var r=this.display_triggers[i];if("$any_event"===(r.event||"")||e===r.event){if(!r.selector||U.isEmptyObject(r.selector))return!0;if(se(r.selector,t.properties))return!0}}return!1})),ae.prototype._browser_lte=function(t,e){return this.browser_versions[t]&&this.browser_versions[t]<=e},ae.prototype._init_image_html=function(){var t=[];return this.mini?(this.thumb_image_url=this.thumb_image_url||this.cdn_host+"/site_media/images/icons/notifications/mini-news-dark.png",t.push(this.thumb_image_url)):(this.image_url?(t.push(this.image_url),this.img_html='<img id="img" src="'+this.image_url+'"/>'):this.img_html="",this.thumb_image_url?(t.push(this.thumb_image_url),this.thumb_img_html='<div id="thumbborder-wrapper"><div id="thumbborder"></div></div><img id="thumbnail" src="'+this.thumb_image_url+'" width="'+ae.THUMB_IMG_SIZE+'" height="'+ae.THUMB_IMG_SIZE+'"/><div id="thumbspacer"></div>'):this.thumb_img_html=""),t},ae.prototype._init_notification_el=function(){var t="",e="",i="",r='<div id="cancel"><div id="cancel-icon"></div></div>';if(this.notification_el=document.createElement("div"),this.notification_el.id=ae.MARKUP_PREFIX+"-wrapper",this.mini)t='<div id="mini"><div id="mainbox">'+r+'<div id="mini-content"><div id="mini-icon"><div id="mini-icon-img"></div></div><div id="body"><div id="body-text"><div>'+this.body+'</div></div></div></div></div><div id="mini-border"></div></div>';else{var n=this.clickthrough||this.show_video?"":'<div id="button-close"></div>',o=this.show_video?'<div id="button-play"></div>':"";this._browser_lte("ie",7)&&(n="",o=""),t='<div id="takeover">'+this.thumb_img_html+'<div id="mainbox">'+r+'<div id="content">'+this.img_html+'<div id="title">'+this.title+'</div><div id="body">'+this.body+'</div><div id="tagline"><a href="http://mixpanel.com?from=inapp" target="_blank">POWERED BY MIXPANEL</a></div></div><div id="button">'+n+'<a id="button-link" href="'+this.dest_url+'">'+this.cta+"</a>"+o+"</div></div></div>"}this.youtube_video?(e=this.resource_protocol+"www.youtube.com/embed/"+this.youtube_video+"?wmode=transparent&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=0&vq=hd1080",this.yt_custom&&(e+="&enablejsapi=1&html5=1&controls=0",i='<div id="video-controls"><div id="video-progress" class="video-progress-el"><div id="video-progress-total" class="video-progress-el"></div><div id="video-elapsed" class="video-progress-el"></div></div><div id="video-time" class="video-progress-el"></div></div>')):this.vimeo_video&&(e=this.resource_protocol+"player.vimeo.com/video/"+this.vimeo_video+"?autoplay=1&title=0&byline=0&portrait=0"),this.show_video&&(this.video_iframe='<iframe id="'+ae.MARKUP_PREFIX+'-video-frame" width="'+this.video_width+'" height="'+this.video_height+'"  src="'+e+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="1" scrolling="no"></iframe>',i='<div id="video-'+(this.flip_animate?"":"no")+'flip"><div id="video"><div id="video-holder"></div>'+i+"</div></div>");var s=i+t;this.flip_animate&&(s=(this.mini?t:"")+'<div id="flipcontainer"><div id="flipper">'+(this.mini?i:s)+"</div></div>"),this.notification_el.innerHTML=('<div id="overlay" class="'+this.notif_type+'"><div id="campaignid-'+this.campaign_id+'"><div id="bgwrapper"><div id="bg"></div>'+s+"</div></div></div>").replace(/class="/g,'class="'+ae.MARKUP_PREFIX+"-").replace(/id="/g,'id="'+ae.MARKUP_PREFIX+"-")},ae.prototype._init_styles=function(){"dark"===this.style?this.style_vals={bg:"#1d1f25",bg_actions:"#282b32",bg_hover:"#3a4147",bg_light:"#4a5157",border_gray:"#32353c",cancel_opacity:"0.4",mini_hover:"#2a3137",text_title:"#fff",text_main:"#9498a3",text_tagline:"#464851",text_hover:"#ddd"}:this.style_vals={bg:"#fff",bg_actions:"#e7eaee",bg_hover:"#eceff3",bg_light:"#f5f5f5",border_gray:"#e4ecf2",cancel_opacity:"1.0",mini_hover:"#fafafa",text_title:"#5c6578",text_main:"#8b949b",text_tagline:"#ced9e6",text_hover:"#7c8598"};var t="0px 0px 35px 0px rgba(45, 49, 56, 0.7)",e=t,i=t,r=ae.THUMB_IMG_SIZE+2*ae.THUMB_BORDER_SIZE,n=ae.ANIM_TIME/1e3+"s";this.mini&&(t="none");var o={};o["@media only screen and (max-width: "+(ae.NOTIF_WIDTH_MINI+20-1)+"px)"]={"#overlay":{display:"none"}};var s={".flipped":{transform:"rotateY(180deg)"},"#overlay":{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",overflow:"auto","text-align":"center","z-index":"10000","font-family":'"Helvetica", "Arial", sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},"#overlay.mini":{height:"0",overflow:"visible"},"#overlay a":{width:"initial",padding:"0","text-decoration":"none","text-transform":"none",color:"inherit"},"#bgwrapper":{position:"relative",width:"100%",height:"100%"},"#bg":{position:"fixed",top:"0",left:"0",width:"100%",height:"100%","min-width":4*this.doc_width+"px","min-height":4*this.doc_height+"px","background-color":"black",opacity:"0.0","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)",filter:"alpha(opacity=60)",transition:"opacity "+n},"#bg.visible":{opacity:ae.BG_OPACITY},".mini #bg":{width:"0",height:"0","min-width":"0"},"#flipcontainer":{perspective:"1000px",position:"absolute",width:"100%"},"#flipper":{position:"relative","transform-style":"preserve-3d",transition:"0.3s"},"#takeover":{position:"absolute",left:"50%",width:ae.NOTIF_WIDTH+"px","margin-left":Math.round(-ae.NOTIF_WIDTH/2)+"px","backface-visibility":"hidden",transform:"rotateY(0deg)",opacity:"0.0",top:ae.NOTIF_START_TOP+"px",transition:"opacity "+n+", top "+n},"#takeover.visible":{opacity:"1.0",top:ae.NOTIF_TOP+"px"},"#takeover.exiting":{opacity:"0.0",top:ae.NOTIF_START_TOP+"px"},"#thumbspacer":{height:ae.THUMB_OFFSET+"px"},"#thumbborder-wrapper":{position:"absolute",top:-ae.THUMB_BORDER_SIZE+"px",left:ae.NOTIF_WIDTH/2-ae.THUMB_OFFSET-ae.THUMB_BORDER_SIZE+"px",width:r+"px",height:r/2+"px",overflow:"hidden"},"#thumbborder":{position:"absolute",width:r+"px",height:r+"px","border-radius":r+"px","background-color":this.style_vals.bg_actions,opacity:"0.5"},"#thumbnail":{position:"absolute",top:"0px",left:ae.NOTIF_WIDTH/2-ae.THUMB_OFFSET+"px",width:ae.THUMB_IMG_SIZE+"px",height:ae.THUMB_IMG_SIZE+"px",overflow:"hidden","z-index":"100","border-radius":ae.THUMB_IMG_SIZE+"px"},"#mini":{position:"absolute",right:"20px",top:ae.NOTIF_TOP+"px",width:this.notif_width+"px",height:2*ae.NOTIF_HEIGHT_MINI+"px","margin-top":20-ae.NOTIF_HEIGHT_MINI+"px","backface-visibility":"hidden",opacity:"0.0",transform:"rotateX(90deg)",transition:"opacity 0.3s, transform 0.3s, right 0.3s"},"#mini.visible":{opacity:"1.0",transform:"rotateX(0deg)"},"#mini.exiting":{opacity:"0.0",right:"-150px"},"#mainbox":{"border-radius":"4px","box-shadow":t,"text-align":"center","background-color":this.style_vals.bg,"font-size":"14px",color:this.style_vals.text_main},"#mini #mainbox":{height:ae.NOTIF_HEIGHT_MINI+"px","margin-top":ae.NOTIF_HEIGHT_MINI+"px","border-radius":"3px",transition:"background-color "+n},"#mini-border":{height:ae.NOTIF_HEIGHT_MINI+6+"px",width:ae.NOTIF_WIDTH_MINI+6+"px",position:"absolute",top:"-3px",left:"-3px","margin-top":ae.NOTIF_HEIGHT_MINI+"px","border-radius":"6px",opacity:"0.25","background-color":"#fff","z-index":"-1","box-shadow":i},"#mini-icon":{position:"relative",display:"inline-block",width:"75px",height:ae.NOTIF_HEIGHT_MINI+"px","border-radius":"3px 0 0 3px","background-color":this.style_vals.bg_actions,background:"linear-gradient(135deg, "+this.style_vals.bg_light+" 0%, "+this.style_vals.bg_actions+" 100%)",transition:"background-color "+n},"#mini:hover #mini-icon":{"background-color":this.style_vals.mini_hover},"#mini:hover #mainbox":{"background-color":this.style_vals.mini_hover},"#mini-icon-img":{position:"absolute","background-image":"url("+this.thumb_image_url+")",width:"48px",height:"48px",top:"20px",left:"12px"},"#content":{padding:"30px 20px 0px 20px"},"#mini-content":{"text-align":"left",height:ae.NOTIF_HEIGHT_MINI+"px",cursor:"pointer"},"#img":{width:"328px","margin-top":"30px","border-radius":"5px"},"#title":{"max-height":"600px",overflow:"hidden","word-wrap":"break-word",padding:"25px 0px 20px 0px","font-size":"19px","font-weight":"bold",color:this.style_vals.text_title},"#body":{"max-height":"600px","margin-bottom":"25px",overflow:"hidden","word-wrap":"break-word","line-height":"21px","font-size":"15px","font-weight":"normal","text-align":"left"},"#mini #body":{display:"inline-block","max-width":"250px",margin:"0 0 0 30px",height:ae.NOTIF_HEIGHT_MINI+"px","font-size":"16px","letter-spacing":"0.8px",color:this.style_vals.text_title},"#mini #body-text":{display:"table",height:ae.NOTIF_HEIGHT_MINI+"px"},"#mini #body-text div":{display:"table-cell","vertical-align":"middle"},"#tagline":{"margin-bottom":"15px","font-size":"10px","font-weight":"600","letter-spacing":"0.8px",color:"#ccd7e0","text-align":"left"},"#tagline a":{color:this.style_vals.text_tagline,transition:"color "+n},"#tagline a:hover":{color:this.style_vals.text_hover},"#cancel":{position:"absolute",right:"0",width:"8px",height:"8px",padding:"10px","border-radius":"20px",margin:"12px 12px 0 0","box-sizing":"content-box",cursor:"pointer",transition:"background-color "+n},"#mini #cancel":{margin:"7px 7px 0 0"},"#cancel-icon":{width:"8px",height:"8px",overflow:"hidden","background-image":"url("+this.cdn_host+"/site_media/images/icons/notifications/cancel-x.png)",opacity:this.style_vals.cancel_opacity},"#cancel:hover":{"background-color":this.style_vals.bg_hover},"#button":{display:"block",height:"60px","line-height":"60px","text-align":"center","background-color":this.style_vals.bg_actions,"border-radius":"0 0 4px 4px",overflow:"hidden",cursor:"pointer",transition:"background-color "+n},"#button-close":{display:"inline-block",width:"9px",height:"60px","margin-right":"8px","vertical-align":"top","background-image":"url("+this.cdn_host+"/site_media/images/icons/notifications/close-x-"+this.style+".png)","background-repeat":"no-repeat","background-position":"0px 25px"},"#button-play":{display:"inline-block",width:"30px",height:"60px","margin-left":"15px","background-image":"url("+this.cdn_host+"/site_media/images/icons/notifications/play-"+this.style+"-small.png)","background-repeat":"no-repeat","background-position":"0px 15px"},"a#button-link":{display:"inline-block","vertical-align":"top","text-align":"center","font-size":"17px","font-weight":"bold",overflow:"hidden","word-wrap":"break-word",color:this.style_vals.text_title,transition:"color "+n},"#button:hover":{"background-color":this.style_vals.bg_hover,color:this.style_vals.text_hover},"#button:hover a":{color:this.style_vals.text_hover},"#video-noflip":{position:"relative",top:2*-this.video_height+"px"},"#video-flip":{"backface-visibility":"hidden",transform:"rotateY(180deg)"},"#video":{position:"absolute",width:this.video_width-1+"px",height:this.video_height+"px",top:ae.NOTIF_TOP+"px","margin-top":"100px",left:"50%","margin-left":Math.round(-this.video_width/2)+"px",overflow:"hidden","border-radius":"5px","box-shadow":e,transform:"translateZ(1px)",transition:"opacity "+n+", top "+n},"#video.exiting":{opacity:"0.0",top:this.video_height+"px"},"#video-holder":{position:"absolute",width:this.video_width-1+"px",height:this.video_height+"px",overflow:"hidden","border-radius":"5px"},"#video-frame":{"margin-left":"-1px",width:this.video_width+"px"},"#video-controls":{opacity:"0",transition:"opacity 0.5s"},"#video:hover #video-controls":{opacity:"1.0"},"#video .video-progress-el":{position:"absolute",bottom:"0",height:"25px","border-radius":"0 0 0 5px"},"#video-progress":{width:"90%"},"#video-progress-total":{width:"100%","background-color":this.style_vals.bg,opacity:"0.7"},"#video-elapsed":{width:"0","background-color":"#6cb6f5",opacity:"0.9"},"#video #video-time":{width:"10%",right:"0","font-size":"11px","line-height":"25px",color:this.style_vals.text_main,"background-color":"#666","border-radius":"0 0 5px 0"}};this._browser_lte("ie",8)&&U.extend(s,{"* html #overlay":{position:"absolute"},"* html #bg":{position:"absolute"},"html, body":{height:"100%"}}),this._browser_lte("ie",7)&&U.extend(s,{"#mini #body":{display:"inline",zoom:"1",border:"1px solid "+this.style_vals.bg_hover},"#mini #body-text":{padding:"20px"},"#mini #mini-icon":{display:"none"}});var a,c,p,u,h,l=["backface-visibility","border-radius","box-shadow","opacity","perspective","transform","transform-style","transition"],f=["khtml","moz","ms","o","webkit"];for(var d in s)for(var _=0;_<l.length;_++){var g=l[_];if(g in s[d])for(var m=s[d][g],y=0;y<f.length;y++)s[d]["-"+f[y]+"-"+g]=m}a=o,c=function(t){var e="";for(var i in t){e+="\n"+i.replace(/#/g,"#"+ae.MARKUP_PREFIX+"-").replace(/\./g,"."+ae.MARKUP_PREFIX+"-")+" {";var r=t[i];for(var n in r)e+=n+":"+r[n]+";";e+="}"}return e},p=c(s)+function(t){var e="";for(var i in t)e+="\n"+i+" {"+c(t[i])+"\n}";return e}(a),u=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=document.createElement("style"),u.appendChild(h),h.setAttribute("type","text/css"),h.styleSheet?h.styleSheet.cssText=p:h.textContent=p},ae.prototype._init_video=U.safewrap((function(){if(this.video_url){var t=this;t.yt_custom="postMessage"in window,t.dest_url=t.video_url;var e=t.video_url.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/ ]{11})/i),i=t.video_url.match(/vimeo\.com\/.*?(\d+)/i);if(e){if(t.show_video=!0,t.youtube_video=e[1],t.yt_custom){window.onYouTubeIframeAPIReady=function(){t._get_el("video-frame")&&t._yt_video_ready()};var r=document.createElement("script");r.src=t.resource_protocol+"www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(r,n)}}else i&&(t.show_video=!0,t.vimeo_video=i[1]);(t._browser_lte("ie",7)||t._browser_lte("firefox",3))&&(t.show_video=!1,t.clickthrough=!0)}})),ae.prototype._mark_as_shown=U.safewrap((function(){var t=this;U.register_event(t._get_el("bg"),"click",(function(){t.dismiss()}));var e=function(t,e){var i={};return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,null):t.currentStyle&&(i=t.currentStyle),i[e]};if(this.campaign_id){var i=this._get_el("overlay");i&&"hidden"!==e(i,"visibility")&&"none"!==e(i,"display")&&this._mark_delivery()}})),ae.prototype._mark_delivery=U.safewrap((function(t){this.marked_as_shown||(this.marked_as_shown=!0,this.campaign_id&&(this._get_shown_campaigns()[this.campaign_id]=1*new Date,this.persistence.save()),this._track_event("$campaign_delivery",t),this.mixpanel.people.append({$campaigns:this.campaign_id,$notifications:{campaign_id:this.campaign_id,message_id:this.message_id,type:"web",time:new Date}}))})),ae.prototype._preload_images=function(t){var e=this;if(0!==this.imgs_to_preload.length){for(var i=0,r=[],n=function(){++i===e.imgs_to_preload.length&&t&&(t(),t=null)},o=0;o<this.imgs_to_preload.length;o++){var s=new Image;s.onload=n,s.src=this.imgs_to_preload[o],s.complete&&n(),r.push(s)}this._browser_lte("ie",7)&&setTimeout((function(){var e=!0;for(o=0;o<r.length;o++)r[o].complete||(e=!1);e&&t&&(t(),t=null)}),500)}else t()},ae.prototype._remove_notification_el=U.safewrap((function(){window.clearInterval(this._video_progress_checker),this.notification_el.style.visibility="hidden",this.body_el.removeChild(this.notification_el)})),ae.prototype._set_client_config=function(){var t=function(t){var e=navigator.userAgent.match(t);return e&&e[1]};this.browser_versions={},this.browser_versions.chrome=t(/Chrome\/(\d+)/),this.browser_versions.firefox=t(/Firefox\/(\d+)/),this.browser_versions.ie=t(/MSIE (\d+).+/),this.browser_versions.ie||window.ActiveXObject||!("ActiveXObject"in window)||(this.browser_versions.ie=11),this.body_el=document.body||document.getElementsByTagName("body")[0],this.body_el&&(this.doc_width=Math.max(this.body_el.scrollWidth,document.documentElement.scrollWidth,this.body_el.offsetWidth,document.documentElement.offsetWidth,this.body_el.clientWidth,document.documentElement.clientWidth),this.doc_height=Math.max(this.body_el.scrollHeight,document.documentElement.scrollHeight,this.body_el.offsetHeight,document.documentElement.offsetHeight,this.body_el.clientHeight,document.documentElement.clientHeight));var e=this.browser_versions.ie,i=document.createElement("div").style,r=function(t){if(t in i)return!0;if(!e)for(var r=["O"+(t=t[0].toUpperCase()+t.slice(1)),"Webkit"+t,"Moz"+t],n=0;n<r.length;n++)if(r[n]in i)return!0;return!1};this.use_transitions=this.body_el&&r("transition")&&r("transform"),this.flip_animate=(this.browser_versions.chrome>=33||this.browser_versions.firefox>=15)&&this.body_el&&r("backfaceVisibility")&&r("perspective")&&r("transform")},ae.prototype._switch_to_video=U.safewrap((function(){var t=this,e=[{el:t._get_notification_display_el(),attr:"opacity",start:1,goal:0},{el:t._get_notification_display_el(),attr:"top",start:ae.NOTIF_TOP,goal:-500},{el:t._get_el("video-noflip"),attr:"opacity",start:0,goal:1},{el:t._get_el("video-noflip"),attr:"top",start:2*-t.video_height,goal:0}];if(t.mini){var i=t._get_el("bg"),r=t._get_el("overlay");i.style.width="100%",i.style.height="100%",r.style.width="100%",t._add_class(t._get_notification_display_el(),"exiting"),t._add_class(i,"visible"),e.push({el:t._get_el("bg"),attr:"opacity",start:0,goal:ae.BG_OPACITY})}t._get_el("video-holder").innerHTML=t.video_iframe;var n=function(){window.YT&&window.YT.loaded&&t._yt_video_ready(),t.showing_video=!0,t._get_notification_display_el().style.visibility="hidden"};t.flip_animate?(t._add_class("flipper","flipped"),setTimeout(n,ae.ANIM_TIME)):t._animate_els(e,ae.ANIM_TIME,n)})),ae.prototype._track_event=function(t,e,i){this.campaign_id?(e=e||{},e=U.extend(e,{campaign_id:this.campaign_id,message_id:this.message_id,message_type:"web_inapp",message_subtype:this.notif_type}),this.mixpanel.track(t,e,i)):i&&i.call()},ae.prototype._yt_video_ready=U.safewrap((function(){var t=this;if(!t.video_inited){t.video_inited=!0;var e=t._get_el("video-elapsed"),i=t._get_el("video-time"),r=t._get_el("video-progress");new window.YT.Player(ae.MARKUP_PREFIX+"-video-frame",{events:{onReady:function(n){var o=n.target,s=o.getDuration(),a=function(t){return("00"+t).slice(-2)},c=function(t){var e=Math.round(s-t),r=Math.floor(e/60),n=Math.floor(r/60);e-=60*r,r-=60*n,i.innerHTML="-"+(n?n+":":"")+a(r)+":"+a(e)};c(0),t._video_progress_checker=window.setInterval((function(){var t=o.getCurrentTime();e.style.width=t/s*100+"%",c(t)}),250),U.register_event(r,"click",(function(t){var e=Math.max(0,t.pageX-r.getBoundingClientRect().left);o.seekTo(s*e/r.clientWidth,!0)}))}}})}}));var ce,pe,ue=function(){};U.extend(ue.prototype,Et),ue.prototype._init=function(t){this._mixpanel=t},ue.prototype.set=ut((function(t,e,i){var r=this.set_action(t,e);return U.isObject(t)&&(i=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),r.$set=U.extend({},U.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),r.$set),this._send_request(r,i)})),ue.prototype.set_once=ut((function(t,e,i){var r=this.set_once_action(t,e);return U.isObject(t)&&(i=e),this._send_request(r,i)})),ue.prototype.unset=ut((function(t,e){var i=this.unset_action(t);return this._send_request(i,e)})),ue.prototype.increment=ut((function(t,e,i){var r={},n={};return U.isObject(t)?(U.each(t,(function(t,e){if(!this._is_reserved_property(e)){if(isNaN(parseFloat(t)))return void q.error("Invalid increment value passed to mixpanel.people.increment - must be a number");n[e]=t}}),this),i=e):(U.isUndefined(e)&&(e=1),n[t]=e),r.$add=n,this._send_request(r,i)})),ue.prototype.append=ut((function(t,e,i){U.isObject(t)&&(i=e);var r=this.append_action(t,e);return this._send_request(r,i)})),ue.prototype.remove=ut((function(t,e,i){U.isObject(t)&&(i=e);var r=this.remove_action(t,e);return this._send_request(r,i)})),ue.prototype.union=ut((function(t,e,i){U.isObject(t)&&(i=e);var r=this.union_action(t,e);return this._send_request(r,i)})),ue.prototype.track_charge=ut((function(t,e,i){if(U.isNumber(t)||(t=parseFloat(t),!isNaN(t)))return this.append("$transactions",U.extend({$amount:t},e),i);q.error("Invalid value passed to mixpanel.people.track_charge - must be a number")})),ue.prototype.clear_charges=function(t){return this.set("$transactions",[],t)},ue.prototype.delete_user=function(){if(this._identify_called()){var t={$delete:this._mixpanel.get_distinct_id()};return this._send_request(t)}q.error("mixpanel.people.delete_user() requires you to call identify() first")},ue.prototype.toString=function(){return this._mixpanel.toString()+".people"},ue.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._mixpanel.get_distinct_id();var i=this._mixpanel.get_property("$device_id"),r=this._mixpanel.get_property("$user_id"),n=this._mixpanel.get_property("$had_persisted_distinct_id");i&&(t.$device_id=i),r&&(t.$user_id=r),n&&(t.$had_persisted_distinct_id=n);var o=U.encodeDates(t);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(t),U.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),U.truncate(o,255))},ue.prototype._get_config=function(t){return this._mixpanel.get_config(t)},ue.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},ue.prototype._enqueue=function(t){yt in t?this._mixpanel.persistence._add_to_people_queue(yt,t):vt in t?this._mixpanel.persistence._add_to_people_queue(vt,t):bt in t?this._mixpanel.persistence._add_to_people_queue(bt,t):wt in t?this._mixpanel.persistence._add_to_people_queue(wt,t):xt in t?this._mixpanel.persistence._add_to_people_queue(xt,t):It in t?this._mixpanel.persistence._add_to_people_queue(It,t):kt in t?this._mixpanel.persistence._add_to_people_queue(kt,t):q.error("Invalid call to _enqueue():",t)},ue.prototype._flush_one_queue=function(t,e,i,r){var n=this,o=U.extend({},this._mixpanel.persistence._get_queue(t)),s=o;U.isUndefined(o)||!U.isObject(o)||U.isEmptyObject(o)||(n._mixpanel.persistence._pop_from_people_queue(t,o),r&&(s=r(o)),e.call(n,s,(function(e,r){0===e&&n._mixpanel.persistence._add_to_people_queue(t,o),U.isUndefined(i)||i(e,r)})))},ue.prototype._flush=function(t,e,i,r,n,o,s){var a=this,c=this._mixpanel.persistence._get_queue(xt),p=this._mixpanel.persistence._get_queue(It);if(this._flush_one_queue(yt,this.set,t),this._flush_one_queue(vt,this.set_once,r),this._flush_one_queue(bt,this.unset,o,(function(t){return U.keys(t)})),this._flush_one_queue(wt,this.increment,e),this._flush_one_queue(kt,this.union,n),!U.isUndefined(c)&&U.isArray(c)&&c.length){for(var u,h=function(t,e){0===t&&a._mixpanel.persistence._add_to_people_queue(xt,u),U.isUndefined(i)||i(t,e)},l=c.length-1;l>=0;l--)u=c.pop(),U.isEmptyObject(u)||a.append(u,h);a._mixpanel.persistence.save()}if(!U.isUndefined(p)&&U.isArray(p)&&p.length){for(var f,d=function(t,e){0===t&&a._mixpanel.persistence._add_to_people_queue(It,f),U.isUndefined(s)||s(t,e)},_=p.length-1;_>=0;_--)f=p.pop(),U.isEmptyObject(f)||a.remove(f,d);a._mixpanel.persistence.save()}},ue.prototype._is_reserved_property=function(t){return"$distinct_id"===t||"$token"===t||"$device_id"===t||"$user_id"===t||"$had_persisted_distinct_id"===t},ue.prototype.set=ue.prototype.set,ue.prototype.set_once=ue.prototype.set_once,ue.prototype.unset=ue.prototype.unset,ue.prototype.increment=ue.prototype.increment,ue.prototype.append=ue.prototype.append,ue.prototype.remove=ue.prototype.remove,ue.prototype.union=ue.prototype.union,ue.prototype.track_charge=ue.prototype.track_charge,ue.prototype.clear_charges=ue.prototype.clear_charges,ue.prototype.delete_user=ue.prototype.delete_user,ue.prototype.toString=ue.prototype.toString;var he=function(t){return t},le=function(){},fe="mixpanel",de=e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,_e=!de&&-1===T.indexOf("MSIE")&&-1===T.indexOf("Mozilla"),ge=null;x.sendBeacon&&(ge=function(){return x.sendBeacon.apply(x,arguments)});var me={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:le,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,ignore_dnt:!1,batch_requests:!1,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},ye=!1,ve=function(){},be=function(t,e,r){var n,o=r===fe?pe:pe[r];if(o&&0===ce)n=o;else{if(o&&!U.isArray(o))return void q.error("You have already initialized "+r);n=new ve}return n._cached_groups={},n._user_decide_check_complete=!1,n._events_tracked_before_user_decide_check_complete=[],n._init(t,e,r),n.people=new ue,n.people._init(n),i.DEBUG=i.DEBUG||n.get_config("debug"),!U.isUndefined(o)&&U.isArray(o)&&(n._execute_array.call(n.people,o.people),n._execute_array(o)),n},we=function(t){var e=U.JSONEncode(t);return{data:U.base64Encode(e)}};ve.prototype.init=function(t,e,i){if(U.isUndefined(i))q.error("You must name your new library: init(token, config, name)");else{if(i!==fe){var r=be(t,e,i);return pe[i]=r,r._loaded(),r}q.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")}},ve.prototype._init=function(t,i,r){i=i||{},this.__loaded=!0,this.config={},this._triggered_notifs=[];var n={},o=i.api_host,s=!!o&&!o.match(/\.mixpanel\.com$/);"batch_requests"in i||s||!L(t,"batch",60)||(n.batch_requests=!0),this.set_config(U.extend({},me,n,i,{name:r,token:t,callback_fn:(r===fe?r:"mixpanel."+r)+"._jsc"})),this._jsc=le,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests&&(U.localStorage.is_supported(!0)&&de?(this.init_batchers(),ge&&e.addEventListener&&e.addEventListener("unload",U.bind((function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})}),this))):(this._batch_requests=!1,q.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"))),this.persistence=this.cookie=new Ct(this.config),this.unpersisted_superprops={},this._gdpr_init();var a=U.UUID();this.get_distinct_id()||this.register_once({distinct_id:a,$device_id:a},"")},ve.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()},ve.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(k.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(k.referrer)},ve.prototype._dom_loaded=function(){U.each(this.__dom_loaded_queue,(function(t){this._track_dom.apply(this,t)}),this),this.has_opted_out_tracking()||U.each(this.__request_queue,(function(t){this._send_request.apply(this,t)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},ve.prototype._track_dom=function(t,e){if(this.get_config("img"))return q.error("You can't use DOM tracking functions with img = true."),!1;if(!ye)return this.__dom_loaded_queue.push([t,e]),!1;var i=(new t).init(this);return i.track.apply(i,e)},ve.prototype._prepare_callback=function(t,e){if(U.isUndefined(t))return null;if(de)return function(i){t(i,e)};var i=this._jsc,r=""+Math.floor(1e8*Math.random()),n=this.get_config("callback_fn")+"["+r+"]";return i[r]=function(n){delete i[r],t(n,e)},n},ve.prototype._send_request=function(t,e,i,r){var n=!0;if(_e)return this.__request_queue.push(arguments),n;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;r||!U.isFunction(i)&&"string"!=typeof i||(r=i,i=null),i=U.extend(o,i||{}),de||(i.method="GET");var a="POST"===i.method,c=ge&&a&&"sendbeacon"===i.transport.toLowerCase(),p=i.verbose;if(e.verbose&&(p=!0),this.get_config("test")&&(e.test=1),p&&(e.verbose=1),this.get_config("img")&&(e.img=1),de||(r?e.callback=r:(p||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=(new Date).getTime().toString(),a&&(s="data="+encodeURIComponent(e.data),delete e.data),t+="?"+U.HTTPBuildQuery(e),"img"in e){var u=k.createElement("img");u.src=t,k.body.appendChild(u)}else if(c){try{n=ge(t,s)}catch(t){q.error(t),n=!1}try{r&&r(n?1:0)}catch(t){q.error(t)}}else if(de)try{var h=new XMLHttpRequest;h.open(i.method,t,!0);var l=this.get_config("xhr_headers");if(a&&(l["Content-Type"]="application/x-www-form-urlencoded"),U.each(l,(function(t,e){h.setRequestHeader(e,t)})),i.timeout_ms&&void 0!==h.timeout){h.timeout=i.timeout_ms;var f=(new Date).getTime()}h.withCredentials=!0,h.onreadystatechange=function(){var t;if(4===h.readyState)if(200===h.status){if(r)if(p){var e;try{e=U.JSONDecode(h.responseText)}catch(t){if(q.error(t),!i.ignore_json_errors)return;e=h.responseText}r(e)}else r(Number(h.responseText))}else t=h.timeout&&!h.status&&(new Date).getTime()-f>=h.timeout?"timeout":"Bad HTTP status: "+h.status+" "+h.statusText,q.error(t),r&&r(p?{status:0,error:t,xhr_req:h}:0)},h.send(s)}catch(t){q.error(t),n=!1}else{var d=k.createElement("script");d.type="text/javascript",d.async=!0,d.defer=!0,d.src=t;var _=k.getElementsByTagName("script")[0];_.parentNode.insertBefore(d,_)}return n},ve.prototype._execute_array=function(t){var e,i=[],r=[],n=[];U.each(t,(function(t){t&&(e=t[0],U.isArray(e)?n.push(t):"function"==typeof t?t.call(this):U.isArray(t)&&"alias"===e?i.push(t):U.isArray(t)&&-1!==e.indexOf("track")&&"function"==typeof this[e]?n.push(t):r.push(t))}),this);var o=function(t,e){U.each(t,(function(t){if(U.isArray(t[0])){var i=e;U.each(t,(function(t){i=i[t[0]].apply(i,t.slice(1))}))}else this[t[0]].apply(this,t.slice(1))}),e)};o(i,this),o(r,this),o(n,this)},ve.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},ve.prototype.init_batchers=function(){var t=this.get_config("token");if(!this.are_batchers_initialized()){var e=U.bind((function(e){return new nt("__mpq_"+t+e.queue_suffix,{libConfig:this.config,sendRequestFunc:U.bind((function(t,i,r){this._send_request(this.get_config("api_host")+e.endpoint,we(t),i,this._prepare_callback(r,t))}),this),beforeSendHook:U.bind((function(t){return this._run_hook("before_send_"+e.type,t)}),this)})}),this);this.request_batchers={events:e({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:e({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:e({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()},ve.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,U.each(this.request_batchers,(function(t){t.start()})))},ve.prototype.stop_batch_senders=function(){this._batch_requests=!1,U.each(this.request_batchers,(function(t){t.stop(),t.clear()}))},ve.prototype.push=function(t){this._execute_array([t])},ve.prototype.disable=function(t){void 0===t?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(t)},ve.prototype._track_or_batch=function(t,e){var i=U.truncate(t.data,255),r=t.endpoint,n=t.batcher,o=t.should_send_immediately,s=t.send_request_options||{};e=e||le;var a=!0,c=U.bind((function(){return s.skip_hooks||(i=this._run_hook("before_send_"+t.type,i)),i?(q.log("MIXPANEL REQUEST:"),q.log(i),this._send_request(r,we(i),s,this._prepare_callback(e,i))):null}),this);return this._batch_requests&&!o?n.enqueue(i,(function(t){t?e(1,i):c()})):a=c(),a&&i},ve.prototype.track=pt((function(t,e,i,r){r||"function"!=typeof i||(r=i,i=null);var n=(i=i||{}).transport;n&&(i.transport=n);var o=i.send_immediately;if("function"!=typeof r&&(r=le),U.isUndefined(t))q.error("No event name provided to mixpanel.track");else{if(!this._event_is_disabled(t)){(e=e||{}).token=this.get_config("token");var s=this.persistence.remove_event_timer(t);if(!U.isUndefined(s)){var a=(new Date).getTime()-s;e.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops(),e=U.extend({},U.info.properties(),this.persistence.properties(),this.unpersisted_superprops,e);var c=this.get_config("property_blacklist");U.isArray(c)?U.each(c,(function(t){delete e[t]})):q.error("Invalid value for property_blacklist config: "+c);var p={event:t,properties:e},u=this._track_or_batch({type:"events",data:p,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:o,send_request_options:i},r);return this._check_and_handle_triggered_notifications(p),u}r(0)}})),ve.prototype.set_group=pt((function(t,e,i){U.isArray(e)||(e=[e]);var r={};return r[t]=e,this.register(r),this.people.set(t,e,i)})),ve.prototype.add_group=pt((function(t,e,i){var r=this.get_property(t);if(void 0===r){var n={};n[t]=[e],this.register(n)}else-1===r.indexOf(e)&&(r.push(e),this.register(n));return this.people.union(t,e,i)})),ve.prototype.remove_group=pt((function(t,e,i){var r=this.get_property(t);if(void 0!==r){var n=r.indexOf(e);n>-1&&(r.splice(n,1),this.register({group_key:r})),0===r.length&&this.unregister(t)}return this.people.remove(t,e,i)})),ve.prototype.track_with_groups=pt((function(t,e,i,r){var n=U.extend({},e||{});return U.each(i,(function(t,e){null!=t&&(n[e]=t)})),this.track(t,n,r)})),ve.prototype._create_map_key=function(t,e){return t+"_"+JSON.stringify(e)},ve.prototype._remove_group_from_cache=function(t,e){delete this._cached_groups[this._create_map_key(t,e)]},ve.prototype.get_group=function(t,e){var i=this._create_map_key(t,e),r=this._cached_groups[i];return void 0!==r&&r._group_key===t&&r._group_id===e||((r=new Tt)._init(this,t,e),this._cached_groups[i]=r),r},ve.prototype.track_pageview=function(t){U.isUndefined(t)&&(t=k.location.href),this.track("mp_page_view",U.info.pageviewInfo(t))},ve.prototype.track_links=function(){return this._track_dom.call(this,J,arguments)},ve.prototype.track_forms=function(){return this._track_dom.call(this,K,arguments)},ve.prototype.time_event=function(t){U.isUndefined(t)?q.error("No event name provided to mixpanel.time_event"):this._event_is_disabled(t)||this.persistence.set_event_timer(t,(new Date).getTime())};var xe={persistent:!0},ke=function(t){var e;return e=U.isObject(t)?t:U.isUndefined(t)?{}:{days:t},U.extend({},xe,e)};ve.prototype.register=function(t,e){var i=ke(e);i.persistent?this.persistence.register(t,i.days):U.extend(this.unpersisted_superprops,t)},ve.prototype.register_once=function(t,e,i){var r=ke(i);r.persistent?this.persistence.register_once(t,e,r.days):(void 0===e&&(e="None"),U.each(t,(function(t,i){this.unpersisted_superprops.hasOwnProperty(i)&&this.unpersisted_superprops[i]!==e||(this.unpersisted_superprops[i]=t)}),this))},ve.prototype.unregister=function(t,e){(e=ke(e)).persistent?this.persistence.unregister(t):delete this.unpersisted_superprops[t]},ve.prototype._register_single=function(t,e){var i={};i[t]=e,this.register(i)},ve.prototype.identify=function(t,e,i,r,n,o,s,a){var c=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var p=c;this.register_once({$had_persisted_distinct_id:!0,$device_id:p},"")}t!==c&&t!==this.get_property($t)&&(this.unregister($t),this.register({distinct_id:t})),this._check_and_handle_notifications(this.get_distinct_id()),this._flags.identify_called=!0,this.people._flush(e,i,r,n,o,s,a),t!==c&&this.track("$identify",{distinct_id:t,$anon_distinct_id:c},{skip_hooks:!0})},ve.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var t=U.UUID();this.register_once({distinct_id:t,$device_id:t},"")},ve.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},ve.prototype.alias=function(t,e){if(t===this.get_property(qt))return q.critical("Attempting to create alias for existing People user - aborting."),-2;var i=this;return U.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single($t,t),this.track("$create_alias",{alias:t,distinct_id:e},{skip_hooks:!0},(function(){i.identify(t)}))):(q.error("alias matches current distinct_id - skipping api call."),this.identify(t),-1)},ve.prototype.name_tag=function(t){this._register_single("mp_name_tag",t)},ve.prototype.set_config=function(t){U.isObject(t)&&(U.extend(this.config,t),t.batch_size&&U.each(this.request_batchers,(function(t){t.resetBatchSize()})),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),i.DEBUG=i.DEBUG||this.get_config("debug"))},ve.prototype.get_config=function(t){return this.config[t]},ve.prototype._run_hook=function(t){var e=(this.config.hooks[t]||he).apply(this,y.call(arguments,1));return void 0===e&&(q.error(t+" hook did not return a value"),e=null),e},ve.prototype.get_property=function(t){return this.persistence.props[t]},ve.prototype.toString=function(){var t=this.get_config("name");return t!==fe&&(t="mixpanel."+t),t},ve.prototype._event_is_disabled=function(t){return U.isBlockedUA(T)||this._flags.disable_all_events||U.include(this.__disabled_events,t)},ve.prototype._check_and_handle_triggered_notifications=pt((function(t){if(this._user_decide_check_complete){for(var e=this._triggered_notifs,i=0;i<e.length;i++)if(new ae(e[i],this)._matches_event_data(t))return void this._show_notification(e[i])}else this._events_tracked_before_user_decide_check_complete.push(t)})),ve.prototype._check_and_handle_notifications=pt((function(t){if(t&&!this._flags.identify_called&&!this.get_config("disable_notifications")){q.log("MIXPANEL NOTIFICATION CHECK");var e={verbose:!0,version:"3",lib:"web",token:this.get_config("token"),distinct_id:t};this._send_request(this.get_config("api_host")+"/decide/",e,{method:"GET",transport:"XHR"},this._prepare_callback(U.bind((function(t){if(t.notifications&&t.notifications.length>0){this._triggered_notifs=[];var e=[];U.each(t.notifications,(function(t){(t.display_triggers&&t.display_triggers.length>0?this._triggered_notifs:e).push(t)}),this),e.length>0&&this._show_notification.call(this,e[0])}this._handle_user_decide_check_complete()}),this)))}})),ve.prototype._handle_user_decide_check_complete=function(){this._user_decide_check_complete=!0;for(var t=this._events_tracked_before_user_decide_check_complete;t.length>0;){var e=t.shift();this._check_and_handle_triggered_notifications(e)}},ve.prototype._show_notification=function(t){new ae(t,this).show()},ve.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&U.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!U.cookie.get("mp_optout")||(U.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},ve.prototype._gdpr_update_persistence=function(t){var e;if(t&&t.clear_persistence)e=!0;else{if(!t||!t.enable_persistence)return;e=!1}this.get_config("disable_persistence")||this.persistence.disabled===e||this.persistence.set_disabled(e),e&&U.each(this.request_batchers,(function(t){t.clear()}))},ve.prototype._gdpr_call_func=function(t,e){return e=U.extend({track:U.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),U.localStorage.is_supported()||(e.persistence_type="cookie"),t(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})},ve.prototype.opt_in_tracking=function(t){t=U.extend({enable_persistence:!0},t),this._gdpr_call_func(ot,t),this._gdpr_update_persistence(t)},ve.prototype.opt_out_tracking=function(t){(t=U.extend({clear_persistence:!0,delete_user:!0},t)).delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(st,t),this._gdpr_update_persistence(t)},ve.prototype.has_opted_in_tracking=function(t){return this._gdpr_call_func(at,t)},ve.prototype.has_opted_out_tracking=function(t){return this._gdpr_call_func(ct,t)},ve.prototype.clear_opt_in_out_tracking=function(t){t=U.extend({enable_persistence:!0},t),this._gdpr_call_func(lt,t),this._gdpr_update_persistence(t)},ve.prototype.init=ve.prototype.init,ve.prototype.reset=ve.prototype.reset,ve.prototype.disable=ve.prototype.disable,ve.prototype.time_event=ve.prototype.time_event,ve.prototype.track=ve.prototype.track,ve.prototype.track_links=ve.prototype.track_links,ve.prototype.track_forms=ve.prototype.track_forms,ve.prototype.track_pageview=ve.prototype.track_pageview,ve.prototype.register=ve.prototype.register,ve.prototype.register_once=ve.prototype.register_once,ve.prototype.unregister=ve.prototype.unregister,ve.prototype.identify=ve.prototype.identify,ve.prototype.alias=ve.prototype.alias,ve.prototype.name_tag=ve.prototype.name_tag,ve.prototype.set_config=ve.prototype.set_config,ve.prototype.get_config=ve.prototype.get_config,ve.prototype.get_property=ve.prototype.get_property,ve.prototype.get_distinct_id=ve.prototype.get_distinct_id,ve.prototype.toString=ve.prototype.toString,ve.prototype._check_and_handle_notifications=ve.prototype._check_and_handle_notifications,ve.prototype._handle_user_decide_check_complete=ve.prototype._handle_user_decide_check_complete,ve.prototype._show_notification=ve.prototype._show_notification,ve.prototype.opt_out_tracking=ve.prototype.opt_out_tracking,ve.prototype.opt_in_tracking=ve.prototype.opt_in_tracking,ve.prototype.has_opted_out_tracking=ve.prototype.has_opted_out_tracking,ve.prototype.has_opted_in_tracking=ve.prototype.has_opted_in_tracking,ve.prototype.clear_opt_in_out_tracking=ve.prototype.clear_opt_in_out_tracking,ve.prototype.get_group=ve.prototype.get_group,ve.prototype.set_group=ve.prototype.set_group,ve.prototype.add_group=ve.prototype.add_group,ve.prototype.remove_group=ve.prototype.remove_group,ve.prototype.track_with_groups=ve.prototype.track_with_groups,ve.prototype.start_batch_senders=ve.prototype.start_batch_senders,ve.prototype.stop_batch_senders=ve.prototype.stop_batch_senders,Ct.prototype.properties=Ct.prototype.properties,Ct.prototype.update_search_keyword=Ct.prototype.update_search_keyword,Ct.prototype.update_referrer_info=Ct.prototype.update_referrer_info,Ct.prototype.get_cross_subdomain=Ct.prototype.get_cross_subdomain,Ct.prototype.clear=Ct.prototype.clear,U.safewrap_class(ve,["identify","_check_and_handle_notifications","_show_notification"]);var Ie={},Ee=(ce=0,(pe=new ve).init=function(t,i,r){if(r)return pe[r]||(pe[r]=Ie[r]=be(t,i,r),pe[r]._loaded()),pe[r];var n=pe;Ie.mixpanel?n=Ie.mixpanel:t&&((n=be(t,i,fe))._loaded(),Ie.mixpanel=n),pe=n,1===ce&&(e.mixpanel=pe),U.each(Ie,(function(t,e){e!==fe&&(pe[e]=t)})),pe._=U},pe.init(),function(){function t(){t.done||(t.done=!0,ye=!0,_e=!1,U.each(Ie,(function(t){t._dom_loaded()})))}if(k.addEventListener)"complete"===k.readyState?t():k.addEventListener("DOMContentLoaded",t,!1);else if(k.attachEvent){k.attachEvent("onreadystatechange",t);var i=!1;try{i=null===e.frameElement}catch(t){}k.documentElement.doScroll&&i&&function e(){try{k.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}t()}()}U.register_event(e,"load",t,!0)}(),pe);t.exports=Ee}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=i(891),e=i.n(t);e().init("4eb2ba43842cf4f6f3d91af158012213");const r=e();var n=i(976);const o="http://localhost:3001/chats";let s=!1,a=null;const c=t=>n.lW.from(t,"utf8").toString("base64");window.ChatsPimex={init:async function({id:t,token:e}){const i="Basic "+c(`${t}:${e}`),p="button-pimex-cf414d48-aca2-4c94-ba9a-9170d8df4a79",u=await async function(t,e){return(await(await fetch(`${o}/settings/${e}`,{method:"GET",headers:{Authorization:t}})).json()).data}(i,t),h=`\n    #${p} {\n      background-color: ${u.color};\n      border-radius: 50%;\n      position: fixed;\n      bottom: ${u.margin.bottom}px;\n      right: ${u.margin.right}px;\n      z-index: 10000;\n      width: 60px;\n      height: 60px;\n      padding: 0;\n      border: none;\n      outline: none;\n      transform: scale(0);\n      opacity: 0;\n      transition: opacity 0.2s ease-out, transform 0.2s ease-out;\n    }\n    \n    #${p}.loaded {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    #${p} .icons .open {\n      transform: scale(0.6) rotate(0);\n      transition: transform 0.2s ease-out, opacity 0.2s ease-out;\n    }\n    \n    #${p} .icons .close {\n      opacity: 0;\n      transform: scale(0.1) rotate(-90deg);\n      transition: transform 0.2s ease-out, opacity 0.2s ease-out;\n    }\n    \n    #${p}.active .icons .open {\n      opacity: 0;\n      transform: scale(0.1) rotate(90deg);\n    }\n    \n    #${p}.active .icons .close {\n      opacity: 1;\n      transform: scale(0.5) rotate(0);\n    }\n    \n    #${p} .icons {\n      position: relative;\n      display: flex;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n    }\n    \n    #${p} .icons svg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    \n    @keyframes spin {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate(360deg);\n      }\n    }\n    `,l=document.createElement("style");document.head.appendChild(l),l.innerHTML=h;const f=document.createElement("button");f.setAttribute("id",p);const d=document.createElement("div");d.classList.add("icons");const _=document.createElementNS("http://www.w3.org/2000/svg","svg"),g=document.createElementNS("http://www.w3.org/2000/svg","svg"),m=document.createElementNS("http://www.w3.org/2000/svg","path"),y=document.createElementNS("http://www.w3.org/2000/svg","path"),v=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"fill","white"),m.setAttributeNS(null,"d","M125.19,84l.14.29c.11.25.22.49.29.62A54.07,54.07,0,0,0,149.72,110a20.18,20.18,0,0,1-9.34,2.38,3.12,3.12,0,0,0-2.51,1.24,2.84,2.84,0,0,0-.42,2.67,21.24,21.24,0,0,0,7.45,9.22c-1.92.37-3.83.84-5.7,1.39l28.64,25a2,2,0,0,0,3.32-1.5V111a27.6,27.6,0,0,0,25.41-27.53V27.6A27.6,27.6,0,0,0,169,0H70A27.62,27.62,0,0,0,42.33,27.62V47.19a55.64,55.64,0,0,1,23.83-6,55.41,55.41,0,0,1,29,8.91,9.52,9.52,0,0,0,10.22-.22,93.64,93.64,0,0,1,34.52-13.41,3.11,3.11,0,0,1,2.58.62,3,3,0,0,1,1.12,2.38c-.25,8.69-2.18,28.93-14,39.44"),y.setAttributeNS(null,"fill","white"),y.setAttributeNS(null,"d","M124.44,52.45A38.15,38.15,0,0,0,107,61.38s0,0,0,0l0,0a3.47,3.47,0,0,0-.26.37,3.3,3.3,0,0,0-.3.43,2.11,2.11,0,0,0-.12.48,2.68,2.68,0,0,0-.11.49,3.93,3.93,0,0,0,.06.48,2.1,2.1,0,0,0,.09.5,2.76,2.76,0,0,0,.25.44,3.38,3.38,0,0,0,.24.41l0,0,0,0A67.73,67.73,0,0,1,120,84.7l.12.26c.09.22.19.43.25.54a46.52,46.52,0,0,0,20.28,22.06,16.33,16.33,0,0,1-7.87,2.09,2.61,2.61,0,0,0-2.47,3.43,18.59,18.59,0,0,0,6.28,8.09,52.4,52.4,0,0,0-12.77,4.37,41.79,41.79,0,0,0-6.12,4.17A71.47,71.47,0,0,1,70.3,146.09a71.46,71.46,0,0,1-47.37-16.38,42.24,42.24,0,0,0-6.11-4.17A53,53,0,0,0,4,121.17a18.66,18.66,0,0,0,6.28-8.09,2.61,2.61,0,0,0-2.48-3.43A16.37,16.37,0,0,1,0,107.55a46.39,46.39,0,0,0,20.22-22c.1-.21.2-.42.29-.64l.14-.31A67.76,67.76,0,0,1,33.8,65.13l0,0,0,0a3.38,3.38,0,0,0,.24-.41,1.5,1.5,0,0,0,.34-.94,3.93,3.93,0,0,0,.06-.48,2.68,2.68,0,0,0-.11-.49,2.81,2.81,0,0,0-.12-.48,2.61,2.61,0,0,0-.31-.43,1.9,1.9,0,0,0-.26-.37l0,0,0,0a38.13,38.13,0,0,0-17.48-8.93,2.6,2.6,0,0,0-1,5.1,32,32,0,0,1,13,6.06A73.77,73.77,0,0,0,16.92,80.3C7,71.07,5.38,53.31,5.16,45.7a2.65,2.65,0,0,1,1-2.1,2.57,2.57,0,0,1,2.17-.54A76.8,76.8,0,0,1,37.34,54.83a7.72,7.72,0,0,0,8.59.18A45.38,45.38,0,0,1,70.3,47.19,45.32,45.32,0,0,1,94.67,55a7.72,7.72,0,0,0,8.6-.19,77,77,0,0,1,29.06-11.76,2.49,2.49,0,0,1,2.16.54,2.63,2.63,0,0,1,.95,2.09c-.21,7.62-1.83,25.38-11.75,34.61a73.77,73.77,0,0,0-11.22-16.69,32,32,0,0,1,13-6.06,2.59,2.59,0,0,0,2-1.72"),v.setAttributeNS(null,"fill","white"),v.setAttributeNS(null,"d","M11.469,10l7.08-7.08c0.406-0.406,0.406-1.064,0-1.469c-0.406-0.406-1.063-0.406-1.469,0L10,8.53l-7.081-7.08 c-0.406-0.406-1.064-0.406-1.469,0c-0.406,0.406-0.406,1.063,0,1.469L8.531,10L1.45,17.081c-0.406,0.406-0.406,1.064,0,1.469 c0.203,0.203,0.469,0.304,0.735,0.304c0.266,0,0.531-0.101,0.735-0.304L10,11.469l7.08,7.081c0.203,0.203,0.469,0.304,0.735,0.304 c0.267,0,0.532-0.101,0.735-0.304c0.406-0.406,0.406-1.064,0-1.469L11.469,10z"),_.appendChild(m),_.appendChild(y),g.appendChild(v),_.classList.add("open"),_.setAttributeNS(null,"viewBox","0 0 198 162.64"),g.classList.add("close"),g.setAttributeNS(null,"viewBox","0 0 20 20"),d.appendChild(_),d.appendChild(g),f.appendChild(d),document.querySelector("body").appendChild(f),f.onclick=async function(){if(!s){const u=localStorage.pimexChatData?JSON.parse((p=localStorage.getItem("pimexChatData"),n.lW.from(p,"base64").toString("utf8"))):await async function(t,e){const i=await async function(){try{const{data:t}=await(await fetch("https://api.ipbase.com/v2/info?apikey=GQOfwznDcF99OOUQh6TCuglbOYBE9nI9x5kmb6eZ",{method:"GET"})).json();return t.location.city||t.location.country.name||"no-location"}catch(t){return""}}(),r=(await(await fetch(`${o}`,{method:"POST",headers:{Authorization:t,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({boardId:e,location:i})})).json()).data,n={chatId:r.id,contactId:r.contactInfo.id};return localStorage.setItem("pimexChatData",c(JSON.stringify(n))),n}(i,t),h=`chat-pimex-${u.chatId}`,f=`\n        #${h} {\n          position: relative;\n          opacity: 0;\n          visibility: hidden;\n          position: fixed;\n          bottom: 80px;\n          right: 0;\n          z-index: 9999;\n          width: 430px;\n          height: calc(100vh - 140px);\n          transform: translateY(25px);\n          transition: opacity 0.2s ease-out, visibility 0.2s ease-out, transform 0.1s ease-out;\n        }\n        \n        #${h}.active {\n          opacity: 1;\n          visibility: visible;\n          transform: translateY(0);\n        }\n        \n        #${h}.loaded iframe {\n          opacity: 1;\n        }\n        \n        #${h}.loaded .loader {\n          opacity: 0;\n          visibility: hidden;\n        }\n        \n        #${h} .loader {\n          position: absolute;\n          border-radius: 50%;\n          width: 100px;\n          height: 100px;\n          top: 50%;\n          left: calc(50% - 50px);\n          border: 10px solid transparent;\n          border-left: 10px solid #555;\n          transition: opacity 0.2s ease-out, visibility 0.2s ease-out;\n          animation: spin 1s infinite linear;\n        }\n        \n        #${h} iframe {\n          width: 100%;\n          height: 100%;\n          border: none;\n          opacity: 0;\n          transition: opacity 0.2s ease-out;\n        }\n        \n        @media (max-width: 767.98px) {\n          #${h} {\n            width: 100vw;\n            height: calc(100vh - 100px);\n            right: 0;\n            left: 0;\n          }\n        }`;l.innerHTML+=f,a=document.createElement("div"),a.id=h;const d=document.createElement("div");d.classList.add("loader");const _=document.createElement("iframe");_.src=`http://localhost:8081/${u.contactId}/${u.chatId}/${t}/${e}`,a.appendChild(_),a.appendChild(d),document.querySelector("body").appendChild(a),r.track("chat.customer.open-chat"),_.onload=function(){a.classList.add("loaded")},s=!0}var p;f.classList.toggle("active"),a.classList.toggle("active")},setTimeout((()=>{f.classList.add("loaded"),console.log("Chat Pimex v1 init"),r.track("chat.customer.view-page")}),500)}}})()})();